# Supabase ì „ëµ ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ

## ë¬¸ì œ ìƒí™©
- **ì¦ìƒ**: ë°±í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì‹œ ê±°ë˜ê°€ 0íšŒë¡œ í‘œì‹œë¨
- **ì›ì¸**: Supabaseì— ì €ì¥ëœ ì „ëµì˜ `indicators` ë°°ì—´ì´ ë¹„ì–´ìˆìŒ
- **ì¶”ê°€ ë¬¸ì œ**: ëŒ€ë¬¸ì ì§€í‘œëª…, operator í˜•ì‹ ë¶ˆì¼ì¹˜

## í•´ê²° ë°©ë²•

### 1. ë¡œì»¬ì—ì„œ ì‹¤í–‰ (ê¶Œì¥)

```bash
# 1. backend/kiwoom_bridge ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd backend/kiwoom_bridge

# 2. Python í™˜ê²½ í™œì„±í™” (ìˆëŠ” ê²½ìš°)
# conda activate auto_stock ë˜ëŠ” venv í™œì„±í™”

# 3. ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
python fix_all_strategies.py
```

### 2. Docker ì»¨í…Œì´ë„ˆì—ì„œ ì‹¤í–‰

```bash
# 1. ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì»¨í…Œì´ë„ˆì— ë³µì‚¬
docker cp fix_all_strategies.py kiwoom-bridge:/app/

# 2. ì»¨í…Œì´ë„ˆì—ì„œ ì‹¤í–‰
docker exec -it kiwoom-bridge python /app/fix_all_strategies.py
```

### 3. Synology NASì—ì„œ ì‹¤í–‰

```bash
# 1. SSHë¡œ NAS ì ‘ì†
ssh your_nas_user@nas_ip

# 2. Docker ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd /volume1/docker/auto_stock/backend/kiwoom_bridge

# 3. ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
docker exec -it kiwoom-bridge python fix_all_strategies.py
```

## ìŠ¤í¬ë¦½íŠ¸ ë™ì‘

### ìë™ ìˆ˜ì • í•­ëª©

1. **ë¹ˆ indicators ë°°ì—´ ì±„ìš°ê¸°**
   - templateIdê°€ ìˆìœ¼ë©´ í•´ë‹¹ í…œí”Œë¦¿ì˜ ê¸°ë³¸ ì§€í‘œ ì¶”ê°€
   - Stage ì „ëµì´ë©´ stage ì„¤ì •ì—ì„œ ì§€í‘œ ì¶”ì¶œ
   - ì¡°ê±´ë¬¸ì—ì„œ ì‚¬ìš©ëœ ì§€í‘œëª…ìœ¼ë¡œë¶€í„° ì¶”ë¡ 

2. **ëŒ€ì†Œë¬¸ì ë³€í™˜**
   - `MA_20` â†’ `ma_20`
   - `RSI_14` â†’ `rsi_14`
   - `CROSS_ABOVE` â†’ `cross_above`

3. **params êµ¬ì¡° ì¶”ê°€**
   ```javascript
   // ë³€ê²½ ì „
   {"type": "ma", "period": 20}

   // ë³€ê²½ í›„
   {"type": "ma", "params": {"period": 20}}
   ```

4. **operator í˜•ì‹ ìˆ˜ì •**
   - MA êµì°¨: `>` â†’ `cross_above`, `<` â†’ `cross_below`
   - ê¸°íƒ€: ì†Œë¬¸ìë¡œ ë³€í™˜

## ì‹¤í–‰ ê²°ê³¼ í™•ì¸

ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ í›„ ë‹¤ìŒê³¼ ê°™ì€ ì¶œë ¥ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```
ğŸ“Š ì „ëµ ë¡œë“œ ì¤‘...
âœ… ì´ 10ê°œ ì „ëµ ë°œê²¬

ğŸ” ìˆ˜ì •ì´ í•„ìš”í•œ ì „ëµ í™•ì¸ ì¤‘...
âš ï¸  5ê°œ ì „ëµì´ ìˆ˜ì • í•„ìš”

ìˆ˜ì •í•  ì „ëµ ëª©ë¡:
  1. ê³¨ë“ í¬ë¡œìŠ¤ ì „ëµ (ID: xxx)
  2. RSI ë°˜ì „ ì „ëµ (ID: yyy)
  ...

ìœ„ ì „ëµë“¤ì„ ìˆ˜ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): y

ğŸ”§ ì „ëµ ìˆ˜ì • ì‹œì‘...

ì „ëµ: ê³¨ë“ í¬ë¡œìŠ¤ ì „ëµ
ë³€ê²½ì‚¬í•­:
  â€¢ í…œí”Œë¦¿ 'golden-cross'ì—ì„œ 2ê°œ ì§€í‘œ ì¶”ê°€
  â€¢ ë§¤ìˆ˜ operator: > â†’ cross_above
  â€¢ ë§¤ë„ operator: < â†’ cross_below
âœ… ì„±ê³µì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë¨
```

## ë°±í…ŒìŠ¤íŠ¸ ì¬ì‹¤í–‰

ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ í›„:

1. **í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ë°±í…ŒìŠ¤íŠ¸ ì‹¤í–‰**
   - ì „ëµ ì„ íƒ
   - ë°±í…ŒìŠ¤íŠ¸ ì‹¤í–‰
   - ê±°ë˜ íšŸìˆ˜ í™•ì¸

2. **ë¡œê·¸ í™•ì¸**
   ```bash
   # Docker ë¡œê·¸ í™•ì¸
   docker logs kiwoom-bridge -f --tail 100
   ```

## ë¬¸ì œ í•´ê²°

### ì—¬ì „íˆ ê±°ë˜ê°€ 0íšŒì¸ ê²½ìš°

1. **ë°±í…ŒìŠ¤íŠ¸ ë¡œê·¸ í™•ì¸**
   - `[FIX]` ë©”ì‹œì§€ í™•ì¸
   - ì§€í‘œ ê³„ì‚° ì—¬ë¶€ í™•ì¸
   - ì‹ í˜¸ ìƒì„± ì—¬ë¶€ í™•ì¸

2. **Supabase ë°ì´í„° ì§ì ‘ í™•ì¸**
   - Supabase ëŒ€ì‹œë³´ë“œì—ì„œ strategies í…Œì´ë¸” í™•ì¸
   - config í•„ë“œì˜ indicators ë°°ì—´ í™•ì¸

3. **ìˆ˜ë™ ìˆ˜ì •**
   ```python
   # check_supabase_strategy.py ì‹¤í–‰
   python check_supabase_strategy.py
   ```

## ì£¼ì˜ì‚¬í•­

- âš ï¸ ë§ˆì´ê·¸ë ˆì´ì…˜ ì „ ë°±ì—… ê¶Œì¥
- âš ï¸ í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” ë¨¼ì € í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œ í™•ì¸
- âš ï¸ ëŒ€ëŸ‰ì˜ ì „ëµì´ ìˆëŠ” ê²½ìš° ë°°ì¹˜ë¡œ ë‚˜ëˆ„ì–´ ì‹¤í–‰

## ì§€ì›

ë¬¸ì œê°€ ê³„ì†ë˜ëŠ” ê²½ìš°:
1. Docker ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘
2. í”„ë¡ íŠ¸ì—”ë“œ ìºì‹œ ì‚­ì œ
3. ë°±ì—”ë“œ ë¡œê·¸ ìƒì„¸ ë¶„ì„