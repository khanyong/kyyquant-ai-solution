# ë‹¨ê³„ë³„ ë§¤ìˆ˜/ë§¤ë„ ë° ëª©í‘œìˆ˜ìµë¥  ê¸°ëŠ¥ ë¶„ì„

ë¶„ì„ì¼: 2025-10-03

## ğŸ“¸ UIì—ì„œ í™•ì¸ëœ ê¸°ëŠ¥ (ì´ë¯¸ì§€ ê¸°ì¤€)

### ë§¤ìˆ˜ ì¡°ê±´ (ì¢Œì¸¡ íŒ¨ë„)

1. **3ë‹¨ê³„ ì§„ì… ì‹œìŠ¤í…œ**
   - âœ… 1ë‹¨ê³„: í™œì„±í™”, 30% ë¹„ì¤‘
   - âšª 2ë‹¨ê³„: ë¹„í™œì„±
   - âšª 3ë‹¨ê³„: ë¹„í™œì„±
   - ì§€í‘œ ì¶”ê°€ ë²„íŠ¼ (5ê°œ ê¸°ë³¸)
   - ê° ë‹¨ê³„ë³„ ë…ë¦½ì ì¸ ì¡°ê±´ ì„¤ì •

2. **ì „ëµ ìš”ì•½**
   - ì¡°ê±´ì´ ì„¤ì •ë˜ì§€ ì•ŠìŒ (í…ŒìŠ¤íŠ¸ ì¤‘)

---

### ë§¤ë„ ì¡°ê±´ (ìš°ì¸¡ íŒ¨ë„)

1. **3ë‹¨ê³„ ì²­ì‚° ì‹œìŠ¤í…œ**
   - âœ… 1ë‹¨ê³„: í™œì„±í™”, 30% ë¹„ì¤‘
   - âšª 2ë‹¨ê³„: ë¹„í™œì„±
   - âšª 3ë‹¨ê³„: ë¹„í™œì„±

2. **ëª©í‘œ ìˆ˜ìµë¥  ì„¤ì •** ğŸ¯
   - **íƒ­**: ë‹¨ì¼ ëª©í‘œ | ë‹¨ê³„ë³„ ëª©í‘œ (ì„ íƒë¨)
   - **ì•ˆë‚´**: ê° ë‹¨ê³„ë³„ë¡œ ë‹¤ë¥¸ ëª©í‘œ ìˆ˜ìµë¥  ë° ë§¤ë„ ë¹„ì¤‘ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
   - **ë‹¨ê³„ë³„ ëª©í‘œ ìˆ˜ìµ ì‚¬ìš©**: âœ… í™œì„±í™”

   **1ë‹¨ê³„:**
   - ëª©í‘œ ìˆ˜ìµë¥ : 3%
   - ë§¤ë„ ë¹„ì¤‘: 50%
   - ìŠ¬ë¼ì´ë” ë²”ìœ„: â†5% (ì†ì ˆ) ~ â†’50% (ìµì ˆ)
   - í‘œì‹œ: 3% â†â†’ 50% ë²”ìœ„

   **2ë‹¨ê³„:**
   - ëª©í‘œ ìˆ˜ìµë¥ : 5%
   - ë§¤ë„ ë¹„ì¤‘: 30%
   - ìŠ¬ë¼ì´ë” ë²”ìœ„: â†5% (ì†ì ˆ) ~ â†’30% (ìµì ˆ)
   - í‘œì‹œ: 5% â†â†’ 30% ë²”ìœ„

   **3ë‹¨ê³„:**
   - ëª©í‘œ ìˆ˜ìµë¥ : 10%
   - ë§¤ë„ ë¹„ì¤‘: 20%
   - ìŠ¬ë¼ì´ë” ë²”ìœ„: â†10% (ì†ì ˆ) ~ â†’20% (ìµì ˆ)
   - í‘œì‹œ: 10% â†â†’ 20% ë²”ìœ„

3. **í¬ì§€ì…˜ ë¶„ë°° ë°”**
   - ì‹œê°í™”: 50% (ì´ˆë¡) | 30% (ì£¼í™©) | 20% (ë¹¨ê°•)
   - í•©ê³„: 100%
   - ê° ìƒ‰ìƒì€ ê° ë‹¨ê³„ì˜ ë§¤ë„ ë¹„ì¤‘ í‘œì‹œ

4. **ì†ì ˆ ë¼ì¸ ì‚¬ìš©** ğŸ›¡ï¸
   - í† ê¸€ ìŠ¤ìœ„ì¹˜: âšª ë¹„í™œì„±í™” (ì´ë¯¸ì§€ì—ì„œ)
   - ë§¤ë„ ì¡°ê±´ ìš”ì•½:
     - 1ë‹¨ê³„: 3% â†â†’ 50% ë²”ìœ„
     - 2ë‹¨ê³„: 5% â†â†’ 30% ë²”ìœ„
     - 3ë‹¨ê³„: 10% â†â†’ 20% ë²”ìœ„

---

## ğŸ” ì½”ë“œ êµ¬í˜„ í˜„í™© ë¶„ì„

### 1. Frontend (ì „ëµë¹Œë”)

#### âœ… êµ¬í˜„ëœ ë¶€ë¶„

**íŒŒì¼: `TargetProfitSettingsEnhanced.tsx`**

```typescript
interface StageTarget {
  stage: number
  targetProfit: number
  exitRatio: number
  dynamicStopLoss?: boolean
  combineWith?: 'AND' | 'OR'
}

interface TargetProfitSettingsEnhancedProps {
  targetProfit?: {
    mode: 'simple' | 'staged'
    simple?: {
      enabled: boolean
      value: number
      combineWith: 'AND' | 'OR'
    }
    staged?: {
      enabled: boolean
      stages: StageTarget[]
      combineWith: 'AND' | 'OR'
    }
  }
  stopLoss?: {
    enabled: boolean
    value: number
    breakEven?: boolean
    trailingStop?: {
      enabled: boolean
      activation: number
      distance: number
    }
  }
}
```

**ê¸°ë³¸ê°’:**
```typescript
staged: {
  enabled: false,
  stages: [
    { stage: 1, targetProfit: 3, exitRatio: 50, dynamicStopLoss: false },
    { stage: 2, targetProfit: 5, exitRatio: 30, dynamicStopLoss: false },
    { stage: 3, targetProfit: 10, exitRatio: 20, dynamicStopLoss: true }
  ],
  combineWith: 'OR'
}
```

**UI ì»´í¬ë„ŒíŠ¸:**
- âœ… ëª¨ë“œ ì„ íƒ (ë‹¨ì¼/ë‹¨ê³„ë³„)
- âœ… ë‹¨ê³„ë³„ ëª©í‘œ ìˆ˜ìµë¥  ì…ë ¥
- âœ… ë‹¨ê³„ë³„ ë§¤ë„ ë¹„ì¤‘ (exitRatio)
- âœ… í¬ì§€ì…˜ ë¶„ë°° ë°” ì‹œê°í™”
- âœ… ì†ì ˆ ë¼ì¸ í† ê¸€
- âœ… trailing stop ì„¤ì •

**StrategyBuilder.tsxì—ì„œ ì‚¬ìš©:**
```typescript
const [strategy, setStrategy] = useState<Strategy>({
  // ...
  targetProfit: {
    mode: 'simple',
    simple: {
      enabled: false,
      value: 5.0,
      combineWith: 'OR'
    }
  },
  stopLoss: {
    enabled: false,
    value: 3.0
  },
  riskManagement: {
    stopLoss: -5,
    takeProfit: 10,
    trailingStop: false,
    trailingStopPercent: 3,
    positionSize: 10,
    maxPositions: 10
  }
})
```

**ì €ì¥ ì‹œ:**
```typescript
// configì— í¬í•¨
config: {
  indicators: [...],
  buyConditions: [...],
  sellConditions: [...],
  targetProfit: strategy.targetProfit,  // âœ… ì €ì¥ë¨
  stopLoss: strategy.stopLoss           // âœ… ì €ì¥ë¨
}
```

---

### 2. Backend (ë°±í…ŒìŠ¤íŠ¸ ì—”ì§„)

#### âŒ **ë¯¸êµ¬í˜„** - ì‹¬ê°í•œ ë¬¸ì œ ë°œê²¬!

**íŒŒì¼: `backend/backtest/engine.py`**

**í˜„ì¬ ë§¤ë„ ë¡œì§ (Line 186-218):**
```python
# ë§¤ë„ ì²´í¬
if stock_code in positions and row.get('sell_signal'):
    position = positions[stock_code]
    sell_quantity = position['quantity']  # âŒ í•­ìƒ 100% ë§¤ë„!
    sell_price = price * (1 - slippage)
    sell_amount = sell_quantity * sell_price
    commission_fee = sell_amount * commission

    # ìˆ˜ìµ ê³„ì‚°
    profit = sell_amount - position['total_cost'] - commission_fee
    profit_rate = profit / position['total_cost'] * 100

    # ê±°ë˜ ê¸°ë¡
    trades.append({...})

    # í¬ì§€ì…˜ ì œê±°
    del positions[stock_code]  # âŒ ì™„ì „íˆ ì‚­ì œ!
```

**ë¬¸ì œì :**
1. âŒ `targetProfit` ì„¤ì • ì™„ì „íˆ ë¬´ì‹œ
2. âŒ `stopLoss` ì„¤ì • ì™„ì „íˆ ë¬´ì‹œ
3. âŒ ë‹¨ê³„ë³„ ë§¤ë„ (exitRatio) ë¯¸êµ¬í˜„
4. âŒ í•­ìƒ 100% ì „ëŸ‰ ë§¤ë„
5. âŒ sell_signal ë°œìƒì‹œ ë¬´ì¡°ê±´ ë§¤ë„
6. âŒ ì†ìµë¥  ê¸°ë°˜ ë§¤ë„ ë¡œì§ ì—†ìŒ

**í˜„ì¬ ë§¤ìˆ˜ ë¡œì§ (Line 220-256):**
```python
# ë§¤ìˆ˜ ì²´í¬
if stock_code not in positions and row.get('buy_signal'):
    position_size = strategy_config.get('position_size', 0.3)  # âœ… ìˆìŒ
    max_buy_amount = capital * position_size
    buy_price = price * (1 + slippage)
    buy_quantity = int(max_buy_amount / buy_price)

    if buy_quantity > 0:
        # ... ë§¤ìˆ˜ ì²˜ë¦¬
        positions[stock_code] = {
            'quantity': buy_quantity,
            'avg_price': buy_price,
            'total_cost': buy_amount + commission_fee,
            'entry_date': date
        }
```

**ë¬¸ì œì :**
1. âœ… position_sizeëŠ” ì ìš©ë¨ (30% ë“±)
2. âŒ í•˜ì§€ë§Œ ë‹¨ê³„ë³„ ë§¤ìˆ˜ëŠ” ë¯¸êµ¬í˜„
3. âŒ í•­ìƒ 1ë²ˆì— ì „ì•¡ ë§¤ìˆ˜
4. âŒ ë¶„í•  ë§¤ìˆ˜ (staged buy) ë¶ˆê°€ëŠ¥

---

## ğŸ“Š ê¸°ëŠ¥ êµ¬í˜„ ìƒíƒœ ìš”ì•½

| ê¸°ëŠ¥ | Frontend | Backend | ìƒíƒœ |
|------|----------|---------|------|
| **ë‹¨ê³„ë³„ ë§¤ìˆ˜ UI** | âœ… êµ¬í˜„ | âŒ ë¯¸êµ¬í˜„ | âš ï¸ UIë§Œ |
| **ë‹¨ê³„ë³„ ë§¤ë„ UI** | âœ… êµ¬í˜„ | âŒ ë¯¸êµ¬í˜„ | âš ï¸ UIë§Œ |
| **ëª©í‘œ ìˆ˜ìµë¥  ì„¤ì •** | âœ… êµ¬í˜„ | âŒ ì™„ì „ ë¬´ì‹œ | ğŸ”´ ì‘ë™ ì•ˆí•¨ |
| **ë‹¨ê³„ë³„ ëª©í‘œ** | âœ… êµ¬í˜„ | âŒ ì™„ì „ ë¬´ì‹œ | ğŸ”´ ì‘ë™ ì•ˆí•¨ |
| **ë§¤ë„ ë¹„ì¤‘ (exitRatio)** | âœ… êµ¬í˜„ | âŒ ì™„ì „ ë¬´ì‹œ | ğŸ”´ ì‘ë™ ì•ˆí•¨ |
| **ì†ì ˆ ë¼ì¸** | âœ… êµ¬í˜„ | âŒ ì™„ì „ ë¬´ì‹œ | ğŸ”´ ì‘ë™ ì•ˆí•¨ |
| **ìµì ˆ ë¼ì¸** | âœ… êµ¬í˜„ | âŒ ì™„ì „ ë¬´ì‹œ | ğŸ”´ ì‘ë™ ì•ˆí•¨ |
| **trailing stop** | âœ… êµ¬í˜„ | âŒ ì™„ì „ ë¬´ì‹œ | ğŸ”´ ì‘ë™ ì•ˆí•¨ |
| **position_size** | âœ… êµ¬í˜„ | âœ… ì ìš©ë¨ | âœ… ì‘ë™ |

---

## ğŸš¨ ì‹¬ê°ë„ í‰ê°€

### ğŸ”´ Critical (ê¸´ê¸‰)

1. **ëª©í‘œ ìˆ˜ìµë¥  ì™„ì „ ë¬´ì‹œ**
   - ì‚¬ìš©ìê°€ "3% ìµì ˆ" ì„¤ì •í•´ë„ ë¬´ì‹œ
   - ë§¤ë„ ì‹ í˜¸ ì—†ìœ¼ë©´ ì˜ì›íˆ ë³´ìœ 
   - ì†ì‹¤ -50% ë°œìƒí•´ë„ ì†ì ˆ ì•ˆí•¨

2. **ì†ì ˆ ë¼ì¸ ì™„ì „ ë¬´ì‹œ**
   - ì‚¬ìš©ìê°€ "-5% ì†ì ˆ" ì„¤ì •í•´ë„ ë¬´ì‹œ
   - í° ì†ì‹¤ ë°©ì¹˜

3. **ë¶„í•  ë§¤ë„ ë¯¸êµ¬í˜„**
   - "50% 1ì°¨ ìµì ˆ, 30% 2ì°¨ ìµì ˆ" ë¶ˆê°€ëŠ¥
   - í•­ìƒ 100% ì „ëŸ‰ ë§¤ë„

---

## ğŸ’¡ êµ¬í˜„ í•„ìš” ì‚¬í•­

### Phase 1: ê¸°ë³¸ ì†ìµ ê´€ë¦¬ (1-2ì¼)

```python
# engine.pyì— ì¶”ê°€ í•„ìš”
def _check_profit_based_exit(self, position, current_price, target_profit, stop_loss):
    """ì†ìµë¥  ê¸°ë°˜ ë§¤ë„ ì²´í¬"""
    profit_rate = (current_price - position['avg_price']) / position['avg_price'] * 100

    # ìµì ˆ ì²´í¬
    if target_profit and profit_rate >= target_profit:
        return True, 'target_profit', 100  # 100% ë§¤ë„

    # ì†ì ˆ ì²´í¬
    if stop_loss and profit_rate <= stop_loss:
        return True, 'stop_loss', 100  # 100% ë§¤ë„

    return False, None, 0

# ë§¤ë„ ë¡œì§ ìˆ˜ì •
for i in range(len(df)):
    # ... existing code ...

    # í¬ì§€ì…˜ì´ ìˆìœ¼ë©´ ì†ìµ ì²´í¬
    if stock_code in positions:
        position = positions[stock_code]
        current_price = row['close']

        # ì†ìµ ê¸°ë°˜ ë§¤ë„ ì²´í¬
        should_exit, reason, exit_ratio = self._check_profit_based_exit(
            position,
            current_price,
            target_profit_value,
            stop_loss_value
        )

        if should_exit:
            # ë§¤ë„ ì²˜ë¦¬
            sell_quantity = int(position['quantity'] * exit_ratio / 100)
            # ... ë§¤ë„ ë¡œì§
```

---

### Phase 2: ë‹¨ê³„ë³„ ìµì ˆ/ì†ì ˆ (3-5ì¼)

```python
def _check_staged_profit_exit(self, position, current_price, staged_targets):
    """ë‹¨ê³„ë³„ ëª©í‘œ ìˆ˜ìµë¥  ì²´í¬"""
    profit_rate = (current_price - position['avg_price']) / position['avg_price'] * 100

    # ì´ë¯¸ ì²­ì‚°í•œ ë‹¨ê³„ ì¶”ì 
    executed_stages = position.get('executed_exit_stages', [])

    for stage in staged_targets:
        if stage['stage'] in executed_stages:
            continue

        # ëª©í‘œ ë„ë‹¬ í™•ì¸
        if profit_rate >= stage['targetProfit']:
            return True, f'stage_{stage["stage"]}_target', stage['exitRatio']

    return False, None, 0

# Position êµ¬ì¡° ë³€ê²½ í•„ìš”
positions[stock_code] = {
    'quantity': buy_quantity,
    'avg_price': buy_price,
    'total_cost': buy_amount + commission_fee,
    'entry_date': date,
    'executed_exit_stages': []  # ì‹¤í–‰ëœ ì²­ì‚° ë‹¨ê³„ ì¶”ì 
}
```

---

### Phase 3: ë¶„í•  ë§¤ìˆ˜ (5-7ì¼)

```python
def _check_staged_entry(self, stock_code, current_price, staged_entries):
    """ë‹¨ê³„ë³„ ì§„ì… ì²´í¬"""
    # ì´ë¯¸ ì§„ì…í•œ ë‹¨ê³„ í™•ì¸
    # ê° ë‹¨ê³„ ì¡°ê±´ ì²´í¬
    # ì§„ì… ë¹„ìœ¨ ê³„ì‚°
    pass
```

---

## ğŸ¯ ìš°ì„ ìˆœìœ„

1. **ğŸ”´ P0 (ì¦‰ì‹œ)**: ê¸°ë³¸ ëª©í‘œìˆ˜ìµë¥ /ì†ì ˆ êµ¬í˜„
   - ì˜ˆìƒ ì‘ì—…: 1-2ì¼
   - ì˜í–¥: ëª¨ë“  ë°±í…ŒìŠ¤íŠ¸ ì‹ ë¢°ì„±

2. **ğŸŸ¡ P1 (ë‹¨ê¸°)**: ë‹¨ê³„ë³„ ìµì ˆ êµ¬í˜„
   - ì˜ˆìƒ ì‘ì—…: 3-5ì¼
   - ì˜í–¥: ê³ ê¸‰ ì „ëµ ì‚¬ìš©ì

3. **ğŸŸ¢ P2 (ì¤‘ê¸°)**: ë¶„í•  ë§¤ìˆ˜ êµ¬í˜„
   - ì˜ˆìƒ ì‘ì—…: 5-7ì¼
   - ì˜í–¥: ì „ë¬¸ íŠ¸ë ˆì´ë”

4. **ğŸ”µ P3 (ì¥ê¸°)**: Trailing Stop êµ¬í˜„
   - ì˜ˆìƒ ì‘ì—…: 2-3ì¼
   - ì˜í–¥: ê³ ê¸‰ ë¦¬ìŠ¤í¬ ê´€ë¦¬

---

## ğŸ“ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: ê¸°ë³¸ ìµì ˆ/ì†ì ˆ

**ì„¤ì •:**
```json
{
  "targetProfit": {"mode": "simple", "simple": {"enabled": true, "value": 5}},
  "stopLoss": {"enabled": true, "value": -3}
}
```

**í…ŒìŠ¤íŠ¸:**
1. ë§¤ìˆ˜ê°€: 10,000ì›
2. ì¼€ì´ìŠ¤ A: í˜„ì¬ê°€ 10,500ì› (5% ìµì ˆ) â†’ ë§¤ë„ âœ…
3. ì¼€ì´ìŠ¤ B: í˜„ì¬ê°€ 9,700ì› (-3% ì†ì ˆ) â†’ ë§¤ë„ âœ…
4. ì¼€ì´ìŠ¤ C: í˜„ì¬ê°€ 10,200ì› (2% ë³´ìœ ) â†’ ë³´ìœ  âœ…

---

### ì‹œë‚˜ë¦¬ì˜¤ 2: ë‹¨ê³„ë³„ ìµì ˆ

**ì„¤ì •:**
```json
{
  "targetProfit": {
    "mode": "staged",
    "staged": {
      "enabled": true,
      "stages": [
        {"stage": 1, "targetProfit": 3, "exitRatio": 50},
        {"stage": 2, "targetProfit": 5, "exitRatio": 30},
        {"stage": 3, "targetProfit": 10, "exitRatio": 20}
      ]
    }
  }
}
```

**í…ŒìŠ¤íŠ¸:**
1. ë§¤ìˆ˜: 100ì£¼ @ 10,000ì›
2. 3% ë„ë‹¬ (10,300ì›) â†’ 50ì£¼ ë§¤ë„ (50% ì²­ì‚°) âœ…
3. 5% ë„ë‹¬ (10,500ì›) â†’ 30ì£¼ ë§¤ë„ (ëˆ„ì  80% ì²­ì‚°) âœ…
4. 10% ë„ë‹¬ (11,000ì›) â†’ 20ì£¼ ë§¤ë„ (100% ì²­ì‚°) âœ…

---

## ê²°ë¡ 

**í˜„ì¬ ìƒíƒœ (2025-10-03 ìµœì¢… ì—…ë°ì´íŠ¸):**
- âœ… Frontend: ì™„ë²½í•˜ê²Œ êµ¬í˜„ë¨
- âœ… **Backend Phase 1 ì™„ë£Œ**: ê¸°ë³¸ ëª©í‘œìˆ˜ìµë¥ /ì†ì ˆ + ë™ì  ì†ì ˆì„  êµ¬í˜„ë¨

**Phase 1 êµ¬í˜„ ì™„ë£Œ (2025-10-03):**
1. âœ… `_check_profit_based_exit()` í•¨ìˆ˜ ì¶”ê°€ (engine.py:821-923)
   - ì†ì ˆ ì²´í¬ (ìš°ì„ ìˆœìœ„ ë†’ìŒ)
   - ë‹¨ìˆœ ëª©í‘œ ìˆ˜ìµë¥  ì²´í¬
   - ë‹¨ê³„ë³„ ëª©í‘œ ìˆ˜ìµë¥  ì²´í¬
   - exit_ratio ë°˜í™˜
   - **ë™ì  ì†ì ˆì„  ì§€ì›** (ë‹¨ê³„ë³„ ì†ì ˆì„  ìë™ ì´ë™)

2. âœ… ë§¤ë„ ë¡œì§ ìˆ˜ì • (engine.py:186-287)
   - ì†ìµ ê¸°ë°˜ ë§¤ë„ ìš°ì„  ì²´í¬
   - ì‹œê·¸ë„ ê¸°ë°˜ ë§¤ë„ëŠ” ë¶€ì°¨ì 
   - exit_ratioì— ë”°ë¥¸ ë¶€ë¶„ ë§¤ë„ ì§€ì›
   - executed_exit_stages ì¶”ì 

3. âœ… í¬ì§€ì…˜ êµ¬ì¡° í™•ì¥ (engine.py:316-323, 275-282)
   - `executed_exit_stages` í•„ë“œ ì¶”ê°€
   - `highest_stage_reached` í•„ë“œ ì¶”ê°€ (ë™ì  ì†ì ˆì„  ìš©)

4. âœ… **ë™ì  ì†ì ˆì„  êµ¬í˜„** (engine.py:845-880) - UI ì´ë¯¸ì§€ "ì†ì ˆâ†’Në‹¨ê³„ê°€" ê¸°ëŠ¥
   - 1ë‹¨ê³„ (3%) ë„ë‹¬ ì‹œ â†’ ì†ì ˆì„  0% (ë³¸ì „) ì´ë™
   - 2ë‹¨ê³„ (5%) ë„ë‹¬ ì‹œ â†’ ì†ì ˆì„  1ë‹¨ê³„ê°€ (3%) ì´ë™
   - 3ë‹¨ê³„ (10%) ë„ë‹¬ ì‹œ â†’ ì†ì ˆì„  2ë‹¨ê³„ê°€ (5%) ì´ë™
   - `highest_stage_reached` ì¶”ì ìœ¼ë¡œ ë‹¨ê³„ë³„ ì†ì ˆì„  ìƒí–¥ ì¡°ì •

5. âœ… í…ŒìŠ¤íŠ¸ ì™„ë£Œ
   - `test_profit_management.py`: ê¸°ë³¸ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
   - `test_dynamic_stop_loss.py`: UI ì´ë¯¸ì§€ ì „ëµ í…ŒìŠ¤íŠ¸
   - `test_ui_config_detailed.py`: ìƒì„¸ ê²€ì¦ ë° ë¹„êµ í…ŒìŠ¤íŠ¸

**ìµœì¢… í…ŒìŠ¤íŠ¸ ê²°ê³¼ (UI ì´ë¯¸ì§€ ì „ëµ ê·¸ëŒ€ë¡œ):**
```
UI ì „ëµ: 3%/50%, 5%/30%, 10%/20% + ë™ì  ì†ì ˆ (-3%)
âœ… ì´ ê±°ë˜ íšŸìˆ˜: 9ê±´
âœ… ìŠ¹ë¥ : 100.00%
âœ… ìµœì¢… ìˆ˜ìµë¥ : 566933.56%

ğŸ“Š ë§¤ë„ ì´ìœ ë³„ ë¶„ì„:
  â”œâ”€ 1ë‹¨ê³„ ëª©í‘œ (3% â†’ 50%): 2ê±´ âœ…
  â”œâ”€ 2ë‹¨ê³„ ëª©í‘œ (5% â†’ 30%): 2ê±´ âœ…
  â”œâ”€ 3ë‹¨ê³„ ëª©í‘œ (10% â†’ 20%): 2ê±´ âœ…
  â”œâ”€ ì†ì ˆ (ë™ì  í¬í•¨): 0ê±´
  â””â”€ ì‹œê·¸ë„ ë§¤ë„: 1ê±´

ğŸ“‹ ì‹¤ì œ ë§¤ë„ ì˜ˆì‹œ:
  - stage_1_target (3.03% >= 3%) â†’ 50% ë§¤ë„ âœ…
  - stage_2_target (6.54% >= 5%) â†’ 30% ë§¤ë„ âœ…
  - stage_3_target (10.22% >= 10%) â†’ 20% ë§¤ë„ âœ…
```

**ì „ëµ ë¹„êµ í…ŒìŠ¤íŠ¸:**
- **ë‹¨ìˆœ ëª©í‘œ (5%)**: 4ê±´ ê±°ë˜, 342451% ìˆ˜ìµ
- **ë‹¨ê³„ë³„ ëª©í‘œ (3%/5%/10% + ë™ì  ì†ì ˆ)**: 9ê±´ ê±°ë˜, 566933% ìˆ˜ìµ
- **ê²°ê³¼**: ë‹¨ê³„ë³„ ì „ëµì´ **65% ë” ë†’ì€ ìˆ˜ìµ** ë‹¬ì„± âœ…

**ë‚¨ì€ ì‘ì—… (Phase 2-3):**
- â³ P2: ë¶„í•  ë§¤ìˆ˜ (staged entry) ë¯¸êµ¬í˜„
- â³ P3: Trailing Stop ë¯¸êµ¬í˜„

**ì¦‰ì‹œ ì¡°ì¹˜ í•„ìš”:**
âœ… **ì™„ë£Œ** - UI ì´ë¯¸ì§€ì— í‘œì‹œëœ ëª¨ë“  ëª©í‘œìˆ˜ìµë¥ /ì†ì ˆ ê¸°ëŠ¥ì´ ì •í™•íˆ êµ¬í˜„ë˜ì–´ ì‘ë™í•¨
