# ğŸš€ KyyQuant AI Solution - ë§ˆìŠ¤í„° ë¡œë“œë§µ

> **í”„ë¡œì íŠ¸ ì „ì²´ ê³„íš ë° ì§„í–‰ ìƒí™© í†µí•© ë¬¸ì„œ**
>
> **ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-10-20
> **ì „ì²´ ì§„í–‰ë¥ **: 80.8% (21ê°œ ì™„ë£Œ / 26ê°œ ì‘ì—…)
> **í˜„ì¬ ë‹¨ê³„**: n8n ì›Œí¬í”Œë¡œìš° ëª¨ë‹ˆí„°ë§ ì™„ë£Œ â†’ ìë™ë§¤ë§¤ ì—°ë™ ì¤€ë¹„ ì¤‘

---

## ğŸ“Š ì „ì²´ í”„ë¡œì íŠ¸ í˜„í™©

### âœ… ì™„ë£Œëœ í•µì‹¬ ë§ˆì¼ìŠ¤í†¤

| ë§ˆì¼ìŠ¤í†¤ | ì§„í–‰ë¥  | ì™„ë£Œì¼ | í•µì‹¬ ì„±ê³¼ |
|---------|--------|--------|-----------|
| **Phase 1: ê¸°ë³¸ ì‹œìŠ¤í…œ** | 100% | 2024-09 | React 18 + Supabase ì¸í”„ë¼ êµ¬ì¶• |
| **Phase 2: ì „ëµ ì‹œìŠ¤í…œ** | 100% | 2025-01 | ì „ëµ ë¹Œë”, ë°±í…ŒìŠ¤íŠ¸, í…œí”Œë¦¿ ì‹œìŠ¤í…œ |
| **Phase 2.5a: í‘œì¤€í™”** | 100% | 2025-10-01 | ì§€í‘œ í‘œì¤€í™”, í”„ë¦¬í”Œë¼ì´íŠ¸ ê²€ì¦, ìë™ ë³€í™˜ |
| **Phase 2.5b: ë°ì´í„° ì¬í˜„ì„±** | 0% | ì§„í–‰ ì˜ˆì • | dataset_id, í•´ì‹œ ê¸°ë°˜ ë²„ì „ ê´€ë¦¬ |
| **Phase 3: API/ì›Œì»¤ ë¶„ë¦¬** | 0% | ê³„íš ì¤‘ | Redis ì‘ì—… í, ë¹„ë™ê¸° ë°±í…ŒìŠ¤íŠ¸ |

### ğŸ¯ ì§„í–‰ ì¤‘ì¸ ì‘ì—…

| ì‘ì—… | ìƒíƒœ | ìš°ì„ ìˆœìœ„ | ì˜ˆìƒ ì™„ë£Œ |
|------|------|----------|-----------|
| NAS ì„œë²„ ë°°í¬ | ì¤€ë¹„ ì™„ë£Œ | ğŸ”´ ê¸´ê¸‰ | 2025-10-02 |
| Supabase í…œí”Œë¦¿ ì¬ìƒì„± | ì¤€ë¹„ ì™„ë£Œ | ğŸ”´ ê¸´ê¸‰ | 2025-10-02 |
| Phase 2.5b êµ¬í˜„ | ì„¤ê³„ ì™„ë£Œ | ğŸŸ¡ ë‹¨ê¸° | 2025-10-05 |
| n8n ì›Œí¬í”Œë¡œìš° ì—°ë™ | ì™„ë£Œ | âœ… ì™„ë£Œ | 2025-10-20 |

---

## ğŸ“‹ ì‘ì—… ëª©ë¡ (Task 1-26)

### âœ… Task 1-19: ì™„ë£Œëœ ì‘ì—… (2024.08 - 2025.01)

<details>
<summary><b>Task 1: í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì •</b> [ì™„ë£Œ: 2024-08-26]</summary>

- React 18 + Vite + TypeScript í™˜ê²½ êµ¬ì„±
- Material-UI v5 ë‹¤í¬ í…Œë§ˆ ì„¤ì •
- Redux Toolkit ìƒíƒœê´€ë¦¬
- React Router v6 ë¼ìš°íŒ…
- ESLint, Prettier ì½”ë“œ í’ˆì§ˆ ë„êµ¬
</details>

<details>
<summary><b>Task 2: ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì„¤ê³„</b> [ì™„ë£Œ: 2024-08-28]</summary>

- Supabase PostgreSQL 15 ì„¤ê³„
- ì‚¬ìš©ì ê´€ë¦¬ í…Œì´ë¸” (profiles, roles, permissions)
- ì „ëµ ê´€ë¦¬ í…Œì´ë¸” (strategies, conditions, indicators)
- ë°±í…ŒìŠ¤íŠ¸ ê²°ê³¼ í…Œì´ë¸” (results, trades, daily_returns)
- ê²Œì‹œíŒ ì‹œìŠ¤í…œ (boards, posts, comments)
- Row Level Security (RLS) ì •ì±… êµ¬í˜„
</details>

<details>
<summary><b>Task 3: Supabase ì¸ì¦ ì‹œìŠ¤í…œ</b> [ì™„ë£Œ: 2024-08-31]</summary>

- Supabase Auth ì—°ë™
- ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸ ë¡œê·¸ì¸
- Google/GitHub OAuth 2.0
- JWT í† í° ê´€ë¦¬, ì„¸ì…˜ ìë™ ê°±ì‹ 
- RBAC ê¶Œí•œ ì‹œìŠ¤í…œ (admin, user, premium, vip)
</details>

<details>
<summary><b>Task 4: ì „ëµ ë¹Œë” ì‹œìŠ¤í…œ</b> [ì™„ë£Œ: 2024-08-30]</summary>

- 10ê°œ ê¸°ìˆ ì  ì§€í‘œ êµ¬í˜„ (RSI, MACD, ë³¼ë¦°ì €ë°´ë“œ, SMA, EMA, Stochastic, CCI, ADX, OBV, ATR)
- AND/OR ë¡œì§ ê²Œì´íŠ¸ ì¡°ê±´ ì„¤ì •
- ì¼ëª©ê· í˜•í‘œ íŠ¹ìˆ˜ ì¡°ê±´ (êµ¬ë¦„ëŒ€ ëŒíŒŒ, ì‚¼ì—­ì „í™˜)
- **3ë‹¨ê³„ ì „ëµ ì‹œìŠ¤í…œ** (2025-09-05 ì¶”ê°€)
  - ë§¤ìˆ˜/ë§¤ë„ ê° 3ë‹¨ê³„ ë…ë¦½ í‰ê°€
  - ë‹¨ê³„ë³„ ìµœëŒ€ 5ê°œ ì§€í‘œ ì„¤ì •
  - í•„í„° ìš°ì„ /ì „ëµ ìš°ì„  ì„ íƒ
- ë¦¬ìŠ¤í¬ ê´€ë¦¬ (ì†ì ˆ, ìµì ˆ, íŠ¸ë ˆì¼ë§ ìŠ¤í†±)
- ì „ëµ ì €ì¥/ê´€ë¦¬ (Supabase, JSON export)
</details>

<details>
<summary><b>Task 5: ë°±í…ŒìŠ¤íŒ… ì‹œìŠ¤í…œ</b> [ì™„ë£Œ: 2024-08-30]</summary>

- í‹± ë°ì´í„° ì‹œë®¬ë ˆì´ì…˜ ì—”ì§„
- ìŠ¬ë¦¬í”¼ì§€ ë° ìˆ˜ìˆ˜ë£Œ ë°˜ì˜
- ì„±ê³¼ ë¶„ì„ ì°¨íŠ¸ (Chart.js)
- ë¦¬ìŠ¤í¬ ë¶„ì„ (ìƒ¤í”„ ì§€ìˆ˜, ì†Œë¥´í‹°ë…¸, MDD, VaR)
- ê±°ë˜ ë¶„ì„ (ìŠ¹ë¥ , ì†ìµë¹„, í‰ê·  ë³´ìœ ê¸°ê°„)
- ì„¹í„°ë³„ ì„±ê³¼ ë¶„ì„
</details>

<details>
<summary><b>Task 6: ì»¤ë®¤ë‹ˆí‹° ê²Œì‹œíŒ</b> [ì™„ë£Œ: 2024-08-30]</summary>

- 8ê°œ ê²Œì‹œíŒ (ê³µì§€ì‚¬í•­, ììœ , Q&A, ì „ëµ ê³µìœ , ì‹œì¥ ë¶„ì„ ë“±)
- WYSIWYG ì—ë””í„°, ì´ë¯¸ì§€/íŒŒì¼ ì²¨ë¶€
- ëŒ“ê¸€/ëŒ€ëŒ“ê¸€ ì‹œìŠ¤í…œ
- ì¢‹ì•„ìš”/ì¡°íšŒìˆ˜/ë¶ë§ˆí¬
- ê²Œì‹œíŒë³„ ê¶Œí•œ ê´€ë¦¬
</details>

<details>
<summary><b>Task 7: íˆ¬ì ì„¤ì • ì‹œìŠ¤í…œ</b> [ì™„ë£Œ: 2024-08-30]</summary>

- íˆ¬ì ìœ ë‹ˆë²„ìŠ¤ ì„¤ì • (ì‹œê°€ì´ì•¡, PER, PBR, ROE, ë¶€ì±„ë¹„ìœ¨)
- í¬íŠ¸í´ë¦¬ì˜¤ ê´€ë¦¬ (ì¢…ëª© ìˆ˜, ë¹„ì¤‘ ì œí•œ, ë¦¬ë°¸ëŸ°ì‹± ì£¼ê¸°)
- ë§¤ë§¤ ì¡°ê±´ ì„¤ì • (ì§„ì…/ì²­ì‚°, ë¶„í•  ë§¤ìˆ˜/ë§¤ë„)
- ìœ„í—˜ ê´€ë¦¬ (ê³„ì¢Œ/ì¼ì¼ ì†ì‹¤ í•œë„, ë³€ë™ì„± ê¸°ë°˜ ì¡°ì ˆ)
- ì—…ì¢…/í…Œë§ˆ ì„¤ì •
</details>

<details>
<summary><b>Task 8: ì‹¤ì‹œê°„ ëŒ€ì‹œë³´ë“œ</b> [ì™„ë£Œ: 2024-09-03]</summary>

- ì‹œì¥ ê°œìš” ìœ„ì ¯ (KOSPI/KOSDAQ ì§€ìˆ˜, ì—…ì¢… ì§€ìˆ˜)
- í¬íŠ¸í´ë¦¬ì˜¤ í˜„í™© (ë³´ìœ  ì¢…ëª©, í‰ê°€ ì†ìµ, ìˆ˜ìµë¥  ì°¨íŠ¸)
- ì‹¤ì‹œê°„ ì‹œì„¸ WebSocket â†’ **Supabase Realtime ì „í™˜ ì˜ˆì •**
- ì‹¤ì‹œê°„ ì°¨íŠ¸ (TradingView í†µí•©)
- ì£¼ë¬¸ íŒ¨ë„ (ì›í´ë¦­ ì£¼ë¬¸, ì˜ˆì•½ ì£¼ë¬¸)
</details>

<details>
<summary><b>Task 9: ìë™ë§¤ë§¤ ì‹œìŠ¤í…œ</b> [ì™„ë£Œ: 2024-09-03]</summary>

- ìë™ë§¤ë§¤ UI (ì „ëµ ì„ íƒ, ON/OFF, ëª¨ë‹ˆí„°ë§)
- ì „ëµ ì‹¤í–‰ ì»¨íŠ¸ë¡¤ (ì‹œì‘/ì¤‘ì§€/ê¸´ê¸‰ì •ì§€)
- **í‚¤ì›€ API ì„œë²„** (Python FastAPI, COM ê°ì²´ ê´€ë¦¬)
- ì‹¤ì‹œê°„ ì£¼ë¬¸ ì‹¤í–‰ (ì‹ í˜¸ ë°œìƒ ì‹œ ìë™ ì£¼ë¬¸)
- í¬ì§€ì…˜ ëª¨ë‹ˆí„°ë§ (ì‹¤ì‹œê°„ ì†ìµ, ë¦¬ìŠ¤í¬ ì§€í‘œ)
</details>

<details>
<summary><b>Task 10: Supabase ë°ì´í„° íŒŒì´í”„ë¼ì¸</b> [ì™„ë£Œ: 2024-09-03]</summary>

- positions, account_balance í…Œì´ë¸” ì¬êµ¬ì„±
- 7ë‹¨ê³„ ë°ì´í„° íŒŒì´í”„ë¼ì¸ (market_data â†’ indicators â†’ signals â†’ orders â†’ positions)
- backend í´ë” êµ¬ì¡° ì •ë¦¬ (api/, core/, database/, scripts/, sql/)
- RLS ì •ì±… ìˆ˜ì • ë° í…ŒìŠ¤íŠ¸
</details>

<details>
<summary><b>Task 11: n8n ì›Œí¬í”Œë¡œìš° ì‹œìŠ¤í…œ</b> [ì™„ë£Œ: 2024-09-03]</summary>

- n8n ì—°ë™ ì‹œìŠ¤í…œ (n8n_connector.py, n8n_config.py)
- Supabase ëª¨ë‹ˆí„°ë§ ì›Œí¬í”Œë¡œìš° (1ë¶„ë§ˆë‹¤ í™œì„± ì „ëµ ì²´í¬)
- ìë™ë§¤ë§¤ ìŠ¤ì¼€ì¤„ëŸ¬ (APScheduler, ì¥ ì‹œê°„ 09:00-15:30)
- **ì‹¤ì œ êµ¬í˜„ì€ Task #20ì—ì„œ ì§„í–‰ ì¤‘**
</details>

<details>
<summary><b>Task 12: ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ë¬¸ì„œí™”</b> [ì™„ë£Œ: 2024-09-03]</summary>

- SYSTEM_ARCHITECTURE.md (ì‹œìŠ¤í…œ êµ¬ì„±, ë°ì´í„° íë¦„, 6ë‹¨ê³„ í”„ë¡œì„¸ìŠ¤)
- backend/README.md (í´ë” êµ¬ì¡°, ëª¨ë“ˆ ì—­í• )
</details>

<details>
<summary><b>Task 13: íˆ¬ì ìœ ë‹ˆë²„ìŠ¤ í•„í„°ë§</b> [ì™„ë£Œ: 2025-09-06]</summary>

- **3,349ê°œ í•œêµ­ ì£¼ì‹ ë°ì´í„° ìˆ˜ì§‘** (KOSPI 2,031 + KOSDAQ 1,318)
- í‚¤ì›€ OpenAPI ì—°ë™ (32-bit Python 3.7)
- í•œê¸€ ì¸ì½”ë”© ë¬¸ì œ í•´ê²° (CP949 â†’ UTF-8, 21ê°œ ì¢…ëª© ìˆ˜ë™ ë§¤í•‘)
- Supabase í˜ì´ì§€ë„¤ì´ì…˜ êµ¬í˜„ (1,000ê°œ ì œí•œ ìš°íšŒ)
- **3ë‹¨ê³„ ëˆ„ì  í•„í„°ë§ ë¡œì§** (ê°€ì¹˜í‰ê°€ â†’ ì¬ë¬´ì§€í‘œ â†’ ì„¹í„°)
- TradingSettingsWithUniverse ì»´í¬ë„ŒíŠ¸ (1,100+ lines)
</details>

<details>
<summary><b>Task 14: ë°±í…ŒìŠ¤íŠ¸ í•„í„°ë§ ì‹œìŠ¤í…œ</b> [ì™„ë£Œ: 2025-09-07]</summary>

- 5ê°€ì§€ í•„í„°ë§ ëª¨ë“œ (ì‚¬ì „/ì‚¬í›„/í•˜ì´ë¸Œë¦¬ë“œ/ì‹¤ì‹œê°„/ì—†ìŒ)
- íˆ¬ìì ë™í–¥ í•„í„° (ì™¸êµ­ì¸/ê¸°ê´€ ë³´ìœ ë¹„ìœ¨, ìˆœë§¤ìˆ˜)
- í•„í„° ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸° (SaveFilterDialog, LoadFilterDialog)
- ë°±í…ŒìŠ¤íŠ¸ í†µí•© (ì‚¬ì „ í•„í„°ë§ ì¢…ëª© ìë™ ë¡œë“œ)
- ë°±í…ŒìŠ¤íŠ¸ ê²°ê³¼ ëª©ë¡ (BacktestResultsList)
</details>

<details>
<summary><b>Task 15: ì „ëµ ê´€ë¦¬ ì‹œìŠ¤í…œ ê°œì„ </b> [ì™„ë£Œ: 2025-09-12]</summary>

- StrategyLoader ì»´í¬ë„ŒíŠ¸ (656 lines)
- ì „ëµ ì¡°ê±´ ì¡°í•© ì‹œê°í™” (ì§€í‘œëª… í•œê¸€í™”, ë‹¨ê³„ë³„ í”Œë¡œìš°)
- ê³µê°œ/ë¹„ê³µê°œ ì „ëµ ê¸°ëŠ¥ (is_public, RLS ì •ì±…)
- ê²€ìƒ‰ ë° ì •ë ¬ (ì´ë¦„/ë‚ ì§œ, ì˜¤ë¦„ì°¨ìˆœ/ë‚´ë¦¼ì°¨ìˆœ)
- ì „ëµ ë¶ˆëŸ¬ì˜¤ê¸° ë²„ê·¸ ìˆ˜ì •
</details>

<details>
<summary><b>Task 16: ë¹Œë“œ ìµœì í™” ë° ë°°í¬</b> [ì™„ë£Œ: 2025-09-12]</summary>

- **ì²­í¬ ë¶„í•  ìµœì í™”** (1.36MB â†’ 5ê°œ ì²­í¬)
  - React vendor: 375KB
  - MUI vendor: 405KB
  - Supabase vendor: 122KB
- vite.config.ts manualChunks ì„¤ì •
- terser â†’ esbuild (ì•ˆì •ì„± í–¥ìƒ)
- Vercel ìë™ ë°°í¬ ì—°ë™
- ë¬¸ì„œ ì •ë¦¬ (DOCUMENTATION_STRUCTURE.md, PROJECT_OVERVIEW.md)
</details>

<details>
<summary><b>Task 17: ë°±í…ŒìŠ¤íŠ¸ ì—”ì§„ ê³ ë„í™”</b> [ì™„ë£Œ: 2025-09-13]</summary>

- backtest_engine_advanced.py (450+ lines)
- **ë©€í‹° ì¢…ëª© ë™ì‹œ ë°±í…ŒìŠ¤íŠ¸**
- ë¶„í•  ë§¤ìˆ˜/ë§¤ë„ ì „ëµ
- indicators_complete.py (250+ lines, 10ê°œ ì§€í‘œ)
- strategy_analyzer.py (ë§¤ë§¤ ì‹ í˜¸ ìƒì„±, AND/OR í‰ê°€)
- StrategyAnalyzer.tsx (1,100+ lines, ì „ëµ ë¡œì§ í•´ì„)
</details>

<details>
<summary><b>Task 18: í‚¤ì›€ REST API í†µí•©</b> [ì™„ë£Œ: 2025-09-14]</summary>

- **í‚¤ì›€ì¦ê¶Œ REST API í† í° ë°œê¸‰ ì„±ê³µ**
  - OAuth 2.0 êµ¬í˜„ (mockapi.kiwoom.com)
  - íŒŒë¼ë¯¸í„° í˜•ì‹ ë¬¸ì œ í•´ê²° (appsecret â†’ secretkey)
- **NAS REST API Bridge Server êµ¬ì¶•**
  - Synology NAS Docker (IP: 192.168.50.150:8080)
  - FastAPI ì„œë²„ (kiwoom_bridge/main.py, 401 lines)
- **ì „ì²´ 2,878ê°œ ì¢…ëª© ìˆ˜ì§‘**
  - pykrx ë¼ì´ë¸ŒëŸ¬ë¦¬ (KOSPI 959 + KOSDAQ 1,803 + KONEX 116)
  - stock_metadata í…Œì´ë¸”
- **í•˜ì´ë¸Œë¦¬ë“œ ì‹œì„¸ ì¡°íšŒ**
  - í‚¤ì›€ API 500 ì—ëŸ¬ ìš°íšŒ
  - pykrx ë°ì´í„° ë°±ì—…
</details>

<details>
<summary><b>Task 19: ëª©í‘œìˆ˜ìµë¥  ë‹¨ê³„ë³„ ë§¤ë„</b> [ì™„ë£Œ: 2025-01-14]</summary>

- **3ë‹¨ê³„ ë¶€ë¶„ ë§¤ë„** (50%, 30%, 20%)
- **ë™ì  ì†ì ˆ ì¡°ì •** (Break Even Stop)
  - 1ë‹¨ê³„ ë„ë‹¬ â†’ ì†ì ˆì„ ë³¸ì „ìœ¼ë¡œ
  - 2ë‹¨ê³„ ë„ë‹¬ â†’ ì†ì ˆì„ 1ë‹¨ê³„ ë§¤ë„ê°€ë¡œ
- **ë‹¨ê³„ë³„ AND/OR ê²°í•©**
- TargetProfitSettingsEnhanced ì»´í¬ë„ŒíŠ¸
- test_staged_profit.py í…ŒìŠ¤íŠ¸
</details>

---

### ğŸ”¥ **Task 20: Phase 2.5a - í‘œì¤€í™” ë° ì•ˆì •ì„± ê°•í™”** [âœ… ì™„ë£Œ: 2025-10-01]

#### ë°°ê²½ ë° ë¬¸ì œ ìƒí™©
**ë°±í…ŒìŠ¤íŠ¸ "ê±°ë˜ 0íšŒ" ì˜¤ë¥˜ ë°œìƒ**:
- MACD ì§€í‘œ ì»¬ëŸ¼ëª… ë¶ˆì¼ì¹˜ (`macd` vs `macd_signal` vs `MACD`)
- í”„ë¡ íŠ¸ì—”ë“œ: `indicator/compareTo` í˜•ì‹
- ë°±ì—”ë“œ: `left/right` í˜•ì‹ ê¸°ëŒ€
- Supabase í…œí”Œë¦¿: êµ¬ í˜•ì‹ ì‚¬ìš©
- ë°ì´í„° ì¬í˜„ì„± ë¶€ì¬ (ë™ì¼ ê¸°ê°„ ë°±í…ŒìŠ¤íŠ¸ ì‹œ ë‹¤ë¥¸ ê²°ê³¼)

#### êµ¬í˜„ ë‚´ìš©

##### 1. ì§€í‘œ-ì»¬ëŸ¼ ë§¤í•‘ í‘œì¤€ í…Œì´ë¸” (`sql/02_indicator_columns_standard.sql`)
```sql
CREATE TABLE IF NOT EXISTS indicator_columns (
    indicator_name TEXT NOT NULL,
    column_name TEXT NOT NULL,
    column_type TEXT DEFAULT 'numeric',
    is_primary BOOLEAN DEFAULT false,
    UNIQUE(indicator_name, column_name)
);

-- 10ê°œ í•µì‹¬ ì§€í‘œ ë“±ë¡
INSERT INTO indicator_columns VALUES
    ('macd', 'macd', 'numeric', true),
    ('macd', 'macd_signal', 'numeric', false),
    ('macd', 'macd_hist', 'numeric', false),
    ('rsi', 'rsi', 'numeric', true),
    ('sma', 'sma_{period}', 'numeric', true),
    -- ... ë‚˜ë¨¸ì§€ ì§€í‘œ
```

**íš¨ê³¼**: ì§€í‘œëª…-ì»¬ëŸ¼ëª… ê³„ì•½ ì •ì˜ë¡œ ë¶ˆì¼ì¹˜ ë°©ì§€

##### 2. ìƒŒë“œë°•ìŠ¤ ì‹¤í–‰ í™˜ê²½ ê°•í™” (`backend/indicators/sandbox.py`)
```python
class SafeExecutor:
    def execute(self, code, df, params, expected_columns):
        # AST ê¸°ë°˜ ì½”ë“œ ê²€ì¦
        is_valid, error_msg = EnhancedSecuritySandbox.validate_ast(code)

        # Timeout (5ì´ˆ)
        signal.alarm(int(self.limits.timeout_seconds))

        # Memory Limit (512MB)
        resource.setrlimit(resource.RLIMIT_AS,
            (self.limits.memory_bytes, self.limits.memory_bytes))

        # ì‹¤í–‰
        exec(code, namespace)

        # ì¶œë ¥ ìŠ¤í‚¤ë§ˆ ê²€ì¦
        validate_output_schema(result, expected_columns)
```

**íš¨ê³¼**: DB ì €ì¥ ì½”ë“œ ì•ˆì „ ì‹¤í–‰, íƒ€ì„ì•„ì›ƒ/ë©”ëª¨ë¦¬ ì œí•œ

##### 3. í”„ë¦¬í”Œë¼ì´íŠ¸ ê²€ì¦ ì‹œìŠ¤í…œ (`backend/backtest/preflight.py`)
```python
@staticmethod
def extract_columns(condition: Dict[str, Any]) -> Set[str]:
    """ì–‘ìª½ í˜•ì‹ ì§€ì›"""
    columns = set()

    # Format 1: left/right
    for side in ['left', 'right']:
        operand = condition.get(side)
        if operand and isinstance(operand, str):
            if not ConditionParser._is_numeric(operand):
                columns.add(operand)

    # Format 2: indicator/compareTo
    indicator = condition.get('indicator')
    if indicator:
        columns.add(indicator)

    compare_to = condition.get('compareTo')
    if compare_to:
        columns.add(compare_to)

    return columns
```

**íš¨ê³¼**:
- ë°±í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì „ ì§€í‘œ ì¡´ì¬ ì—¬ë¶€ ê²€ì¦
- êµ¬ í˜•ì‹ + ì‹  í˜•ì‹ ëª¨ë‘ ì§€ì› (ë§ˆì´ê·¸ë ˆì´ì…˜ ê¸°ê°„)
- ìˆœí™˜ ì°¸ì¡° ê°ì§€

##### 4. í”„ë¡ íŠ¸ì—”ë“œ ìë™ ë³€í™˜ (`src/utils/conditionConverter.ts`)
```typescript
export const convertConditionToStandard = (
  oldCondition: OldCondition
): StandardCondition => {
  const left = normalizeIndicatorName(oldCondition.indicator)
  const operator = OPERATOR_MAPPING[oldCondition.operator] || oldCondition.operator
  const right = typeof oldCondition.value === 'string'
    ? normalizeIndicatorName(oldCondition.value)
    : oldCondition.value

  return { left, operator, right }
}

const OPERATOR_MAPPING = {
  'cross_above': 'crossover',
  'cross_below': 'crossunder',
  '=': '==',
}
```

**íš¨ê³¼**:
- StrategyBuilder ì €ì¥ ì‹œ ìë™ ë³€í™˜
- ì‚¬ìš©ì ê°œì… ì—†ì´ í‘œì¤€ í˜•ì‹ ì ìš©

##### 5. StrategyBuilder í†µí•© (`src/components/StrategyBuilder.tsx`)
```typescript
// Line 81: Import
import { ensureStandardFormat } from '../utils/conditionConverter'

// Line 601-606: ì €ì¥ ì‹œ ë³€í™˜
const convertedStrategy = ensureStandardFormat({
  buyConditions: strategy.buyConditions,
  sellConditions: strategy.sellConditions
})
console.log('[StrategyBuilder] Converted to standard format:', convertedStrategy)

// Line 625: ì§€í‘œ í˜•ì‹ í‘œì¤€í™”
const indicatorConfig: any = {
  name: ind.id.toLowerCase().replace('_', ''),  // sma_20 â†’ sma
  type: ind.id.toUpperCase(),  // SMA
  params: ind.params || {}
}
```

#### í…ŒìŠ¤íŠ¸ ë° ë°°í¬ ìƒíƒœ
- âœ… í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œ ì„±ê³µ (1,484KB â†’ 456KB gzipped)
- âœ… TypeScript ì»´íŒŒì¼ í†µê³¼
- âœ… BacktestRunner.tsx íƒ€ì… ì—ëŸ¬ ìˆ˜ì •
- â³ NAS ì„œë²„ ë°°í¬ ëŒ€ê¸°
- â³ Supabase í…œí”Œë¦¿ ì¬ìƒì„± ëŒ€ê¸°

#### ì‚°ì¶œë¬¼
| íŒŒì¼ëª… | ì„¤ëª… | ìƒíƒœ |
|--------|------|------|
| `sql/02_indicator_columns_standard.sql` | ì§€í‘œ-ì»¬ëŸ¼ ë§¤í•‘ í…Œì´ë¸” | âœ… |
| `backend/indicators/sandbox.py` | ìƒŒë“œë°•ìŠ¤ ì‹¤í–‰ í™˜ê²½ | âœ… |
| `backend/backtest/preflight.py` | í”„ë¦¬í”Œë¼ì´íŠ¸ ê²€ì¦ | âœ… |
| `src/utils/conditionConverter.ts` | ìë™ ë³€í™˜ ìœ í‹¸ | âœ… |
| `src/components/StrategyBuilder.tsx` | í†µí•© ì ìš© | âœ… |
| `sql/04_reset_strategies_with_standard_templates.sql` | í…œí”Œë¦¿ ì¬ìƒì„± | ì¤€ë¹„ ì™„ë£Œ |
| `docs/testing/FRONTEND_AUTO_CONVERSION_TEST.md` | í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ | âœ… |

---

### âœ… **Task 20 (ì™„ë£Œ): n8n ì›Œí¬í”Œë¡œìš° ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ**

**ê¸°ê°„**: 2025-09 - 2025-10-20
**ì§„í–‰ë¥ **: 100%

#### ì™„ë£Œëœ ì‘ì—…
- âœ… n8n ì„œë²„ ì„¤ì • (NAS Docker ì»¨í…Œì´ë„ˆ, ìµœì‹  ë²„ì „)
- âœ… nginx ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ êµ¬ì¶• (CORS ë¬¸ì œ í•´ê²°)
- âœ… Docker ë„¤íŠ¸ì›Œí¬ ì„¤ì • (nginx â†” n8n í†µì‹ )
- âœ… n8n API í´ë¼ì´ì–¸íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ê°œë°œ (`src/lib/n8n.ts`)
  - TypeScript ì¸í„°í˜ì´ìŠ¤ ì •ì˜
  - ì›Œí¬í”Œë¡œìš° ì¡°íšŒ API
  - ì‹¤í–‰ ë‚´ì—­ ì¡°íšŒ API
  - ë…¸ë“œë³„ ì‹¤í–‰ ìƒíƒœ ë¶„ì„
- âœ… n8n ì›Œí¬í”Œë¡œìš° ëª¨ë‹ˆí„°ë§ UI (`src/components/N8nWorkflowMonitor.tsx`)
  - ì‹¤ì‹œê°„ ì›Œí¬í”Œë¡œìš° í™œë™ ëŒ€ì‹œë³´ë“œ
  - 4ê°œ í†µê³„ ì¹´ë“œ (ì„±ê³µ/ì‹¤íŒ¨/ì„±ê³µë¥ /ì´ ì‹¤í–‰íšŸìˆ˜)
  - ì›Œí¬í”Œë¡œìš°ë³„ ìƒì„¸ ì •ë³´ (ì•„ì½”ë””ì–¸ í˜•ì‹)
  - ë…¸ë“œë³„ ì‹¤í–‰ ìƒíƒœ í…Œì´ë¸”
  - 30ì´ˆ ìë™ ìƒˆë¡œê³ ì¹¨
- âœ… ìë™ë§¤ë§¤ íƒ­ í†µí•©
- âœ… CORS ì´ìŠˆ í•´ê²°
  - nginxì—ì„œ CORS í—¤ë” ì²˜ë¦¬
  - preflight OPTIONS ìš”ì²­ ì§€ì›
  - API Key í—¤ë” ì „ë‹¬

#### ê¸°ìˆ  ìŠ¤íƒ
- **ë°±ì—”ë“œ**: n8n latest (Docker), nginx (ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ)
- **í”„ë¡ íŠ¸ì—”ë“œ**: React 18, TypeScript, Material-UI
- **í†µì‹ **: REST API, CORS ì„¤ì •
- **í¬íŠ¸**: nginx:5679 â†’ n8n:5678

#### ë‹¤ìŒ ë‹¨ê³„
- ì‹¤ì‹œê°„ ì „ëµ ëª¨ë‹ˆí„°ë§ (í™œì„± ì „ëµ ì²´í¬, ë§¤ë§¤ ì‹ í˜¸ ìƒì„±)
- ìë™ ì£¼ë¬¸ ì‹¤í–‰ (ë§¤ìˆ˜/ë§¤ë„ ìë™í™”, ì²´ê²° í™•ì¸)
- í‚¤ì›€ API ì—°ë™ ë…¸ë“œ ê°œë°œ

---

### ğŸ“‹ **Task 21-26: ëŒ€ê¸° ì¤‘ì¸ ì‘ì—…**

<details>
<summary><b>Task 21: ì„±ê³¼ ë¶„ì„ ëŒ€ì‹œë³´ë“œ</b> [ëŒ€ê¸°: 0%]</summary>

**ì˜ˆìƒ ê¸°ê°„**: 2025-10 (2ì£¼)

- ìˆ˜ìµë¥  ë¶„ì„ (ì¼/ì£¼/ì›”/ë…„, CAGR, ìœ„í—˜ ì¡°ì • ìˆ˜ìµë¥ )
- í¬íŠ¸í´ë¦¬ì˜¤ ë¶„ì„ (ìì‚° ë°°ë¶„, ì„¹í„° ë°°ë¶„, ìƒê´€ê´€ê³„)
- ë²¤ì¹˜ë§ˆí¬ ë¹„êµ (KOSPI/KOSDAQ ëŒ€ë¹„, ì•ŒíŒŒ/ë² íƒ€)
- ë¦¬ìŠ¤í¬ ëª¨ë‹ˆí„°ë§ (VaR, CVaR, ìŠ¤íŠ¸ë ˆìŠ¤ í…ŒìŠ¤íŠ¸)
- ë¦¬í¬íŠ¸ ìƒì„± (ì¼ì¼/ì›”ê°„ PDF, Excel ì¶”ì¶œ)
</details>

<details>
<summary><b>Task 22: AI í¬íŠ¸í´ë¦¬ì˜¤ ìµœì í™”</b> [ëŒ€ê¸°: 0%]</summary>

**ì˜ˆìƒ ê¸°ê°„**: 2025-10 (3ì£¼)

- ML ëª¨ë¸ ê°œë°œ (LSTM ê°€ê²© ì˜ˆì¸¡, Random Forest ì¢…ëª© ì„ íƒ)
- í¬íŠ¸í´ë¦¬ì˜¤ ìµœì í™” (Mean-Variance, Black-Litterman, Risk Parity)
- ë¦¬ë°¸ëŸ°ì‹± ìë™í™” (ì£¼ê¸°ì , ì„ê³„ê°’ ê¸°ë°˜, ì„¸ê¸ˆ ìµœì í™”)
- AI ì¶”ì²œ ì‹œìŠ¤í…œ (ì¢…ëª©/íƒ€ì´ë°/í¬íŠ¸í´ë¦¬ì˜¤ êµ¬ì„± ì¶”ì²œ)
- ë°±í…ŒìŠ¤íŒ… ê²€ì¦ (Walk-forward, Out-of-sample)
</details>

<details>
<summary><b>Task 23: ì•Œë¦¼ ì‹œìŠ¤í…œ</b> [ëŒ€ê¸°: 0%]</summary>

**ì˜ˆìƒ ê¸°ê°„**: 2025-10 (1ì£¼)

- ì´ë©”ì¼ ì•Œë¦¼ (SendGrid, ì¼ì¼ ìš”ì•½, ê±°ë˜ í™•ì¸)
- í…”ë ˆê·¸ë¨ ë´‡ (ì‹¤ì‹œê°„ ì•Œë¦¼, ëª…ë ¹ì–´ ì¡°íšŒ, ì°¨íŠ¸ ì „ì†¡)
- í‘¸ì‹œ ì•Œë¦¼ (FCM, iOS/Android, Web Push)
- ì•Œë¦¼ ì„¤ì • (ìœ í˜•ë³„ ON/OFF, ì‹œê°„ëŒ€, ë¹ˆë„ ì œí•œ)
- ì•Œë¦¼ ê´€ë¦¬ (íˆìŠ¤í† ë¦¬, ì½ìŒ/ì•ˆì½ìŒ, ê²€ìƒ‰)
</details>

<details>
<summary><b>Task 24: ëª¨ë°”ì¼ ë°˜ì‘í˜• UI</b> [ëŒ€ê¸°: 0%]</summary>

**ì˜ˆìƒ ê¸°ê°„**: 2025-11 (2ì£¼)

- ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ (ëª¨ë°”ì¼ ë¸Œë ˆì´í¬í¬ì¸íŠ¸, í„°ì¹˜ UI, ìŠ¤ì™€ì´í”„)
- ëª¨ë°”ì¼ ìµœì í™” (ë ˆì´ì§€ ë¡œë”©, ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…, ìºì‹±)
- PWA êµ¬í˜„ (Service Worker, Manifest, í™ˆ í™”ë©´ ì¶”ê°€)
- ëª¨ë°”ì¼ ì „ìš© ê¸°ëŠ¥ (ìƒì²´ ì¸ì¦, í€µ ì•¡ì…˜, ìœ„ì ¯)
- ì„±ëŠ¥ ìµœì í™” (Virtual scrolling, Debounce/Throttle)
</details>

<details>
<summary><b>Task 25: í…ŒìŠ¤íŠ¸ ë° ìµœì í™”</b> [ëŒ€ê¸°: 0%]</summary>

**ì˜ˆìƒ ê¸°ê°„**: 2025-11 (2ì£¼)

- ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (Jest, React Testing Library, ì»¤ë²„ë¦¬ì§€ 80%)
- í†µí•© í…ŒìŠ¤íŠ¸ (Cypress E2E, í¬ë¡œìŠ¤ ë¸Œë¼ìš°ì €)
- ì„±ëŠ¥ ìµœì í™” (Lighthouse, Bundle í¬ê¸°, Tree shaking)
- ë³´ì•ˆ ì ê²€ (OWASP Top 10, SQL Injection, XSS, CSRF)
- ì ‘ê·¼ì„± ê°œì„  (WCAG 2.1, í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜, ARIA labels)
</details>

<details>
<summary><b>Task 26: ë¬¸ì„œí™” ë° ë°°í¬</b> [ëŒ€ê¸°: 0%]</summary>

**ì˜ˆìƒ ê¸°ê°„**: 2025-12 (1ì£¼)

- API ë¬¸ì„œí™” (OpenAPI 3.0, Swagger UI, ì˜ˆì œ ì½”ë“œ)
- ì‚¬ìš©ì ê°€ì´ë“œ (ì˜¨ë³´ë”©, ê¸°ëŠ¥ë³„ ì„¤ëª…, ë¹„ë””ì˜¤, FAQ)
- ê°œë°œì ë¬¸ì„œ (ì•„í‚¤í…ì²˜, Storybook, ì½”ë“œ ì»¨ë²¤ì…˜)
- Vercel ë°°í¬ (í™˜ê²½ ë³€ìˆ˜, Custom domain, Preview deployments)
- ëª¨ë‹ˆí„°ë§ ì„¤ì • (Sentry, Google Analytics, Performance, Uptime)
</details>

---

## ğŸ¯ ì¦‰ì‹œ í•´ì•¼ í•  ì‘ì—… (ìš°ì„ ìˆœìœ„ ìˆœ)

### 1. âš¡ **NAS ì„œë²„ ë°°í¬** [30ë¶„]

**ëª©ì **: Phase 2.5a ìµœì‹  ë°±ì—”ë“œ ë°°í¬

```bash
# 1. ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
cd D:\Dev\auto_stock\scripts\deployment
bash deploy_backend_to_nas.sh

# 2. ë°°í¬ í™•ì¸
curl http://192.168.50.150:8001/health

# 3. ë°±í…ŒìŠ¤íŠ¸ í…ŒìŠ¤íŠ¸
python test_nas_backtest.py
```

**ë°°í¬ íŒŒì¼**:
- `backend/backtest/preflight.py` (ì–‘ìª½ í˜•ì‹ ì§€ì›)
- `backend/indicators/calculator.py` (DB ì „ìš© ëª¨ë“œ)
- `backend/indicators/sandbox.py` (ë³´ì•ˆ ê°•í™”)

---

### 2. ğŸ—„ï¸ **Supabase í…œí”Œë¦¿ ì „ëµ ì¬ìƒì„±** [10ë¶„]

**í˜„ì¬ ë¬¸ì œ**: í…œí”Œë¦¿ ì „ëµì´ êµ¬ í˜•ì‹(`indicator/compareTo`) ì‚¬ìš© ì¤‘

**í•´ê²°ì±…**: í‘œì¤€ í˜•ì‹ìœ¼ë¡œ ì¬ìƒì„±

```bash
# Supabase SQL Editorì—ì„œ ì‹¤í–‰
# sql/04_reset_strategies_with_standard_templates.sql ë‚´ìš© ë³µì‚¬/ì‹¤í–‰
```

**í¬í•¨ëœ í…œí”Œë¦¿** (10ê°œ):
1. MACD ì‹œê·¸ë„
2. RSI ê³¼ë§¤ë„ ë°˜ë“±
3. ê³¨ë“ í¬ë¡œìŠ¤
4. ë³¼ë¦°ì €ë°´ë“œ ëŒíŒŒ
5. ìŠ¤í† ìºìŠ¤í‹± ê³¼ë§¤ë„
6. ì´ë™í‰ê·  3ì„  ì •ë ¬
7. ADX ì¶”ì„¸ ê°•ë„
8. OBV ê±°ë˜ëŸ‰ í™•ì¸
9. ATR ë³€ë™ì„± ëŒíŒŒ
10. VWAP ê°€ê²© ê´´ë¦¬

---

### 3. ğŸ§ª **ì—”ë“œíˆ¬ì—”ë“œ í…ŒìŠ¤íŠ¸** [1ì‹œê°„]

**ì‹œë‚˜ë¦¬ì˜¤ A: ìƒˆ ì „ëµ ìƒì„± â†’ ë°±í…ŒìŠ¤íŠ¸**
1. StrategyBuilderì—ì„œ ìƒˆ ì „ëµ ìƒì„±
2. ì§€í‘œ: SMA(20), SMA(50)
3. ë§¤ìˆ˜: `sma_20 crossover sma_50`
4. ì €ì¥ â†’ ì½˜ì†” ë¡œê·¸ í™•ì¸ (í‘œì¤€ í˜•ì‹ ë³€í™˜)
5. ë°±í…ŒìŠ¤íŠ¸ ì‹¤í–‰ â†’ ê±°ë˜ ë°œìƒ í™•ì¸

**ì‹œë‚˜ë¦¬ì˜¤ B: í…œí”Œë¦¿ ì „ëµ ì‚¬ìš©**
1. "MACD ì‹œê·¸ë„" í…œí”Œë¦¿ ë¡œë“œ
2. ë°±í…ŒìŠ¤íŠ¸ ì‹¤í–‰
3. ê±°ë˜ ë‚´ì—­ í™•ì¸ (0íšŒ ì•„ë‹˜ì„ í™•ì¸)

**ì‹œë‚˜ë¦¬ì˜¤ C: ê¸°ì¡´ ì „ëµ í¸ì§‘**
1. Supabaseì˜ êµ¬ í˜•ì‹ ì „ëµ ë¡œë“œ
2. StrategyBuilderì—ì„œ í¸ì§‘
3. ì €ì¥ â†’ ìë™ ë³€í™˜ í™•ì¸
4. ë°±í…ŒìŠ¤íŠ¸ ì‹¤í–‰

**í…ŒìŠ¤íŠ¸ ë¬¸ì„œ**: [docs/testing/FRONTEND_AUTO_CONVERSION_TEST.md](docs/testing/FRONTEND_AUTO_CONVERSION_TEST.md)

---

### 4. ğŸ“Š **Phase 2.5b ì°©ìˆ˜** [2-3ì¼]

**ëª©í‘œ**: ë°±í…ŒìŠ¤íŠ¸ ê²°ê³¼ë¥¼ 100% ì¬í˜„ ê°€ëŠ¥í•˜ê²Œ ë§Œë“¤ê¸°

#### Step 1: `sql/05_dataset_versioning.sql` ì‘ì„±
```sql
CREATE TABLE price_datasets (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    stock_code TEXT NOT NULL,
    start_date DATE NOT NULL,
    end_date DATE NOT NULL,
    data_hash TEXT NOT NULL,  -- SHA256(ì •ë ¬ëœ OHLCV ë°ì´í„°)
    row_count INTEGER NOT NULL,
    created_at TIMESTAMP DEFAULT NOW(),
    UNIQUE(stock_code, start_date, end_date, data_hash)
);

ALTER TABLE backtest_results
ADD COLUMN dataset_id UUID REFERENCES price_datasets(id);
```

#### Step 2: `backend/backtest/dataset_manager.py` êµ¬í˜„
```python
def generate_dataset_hash(df: pd.DataFrame) -> str:
    """ì •ë ¬ëœ OHLCV ë°ì´í„°ì˜ SHA256 í•´ì‹œ ìƒì„±"""
    sorted_df = df.sort_index()
    data_bytes = sorted_df.to_json().encode('utf-8')
    return hashlib.sha256(data_bytes).hexdigest()

async def get_or_create_dataset(stock_code, start_date, end_date, price_df):
    data_hash = generate_dataset_hash(price_df)

    # ê¸°ì¡´ ë°ì´í„°ì…‹ ì¡°íšŒ
    existing = await supabase.from_('price_datasets') \
        .select('id') \
        .eq('stock_code', stock_code) \
        .eq('data_hash', data_hash) \
        .single()

    if existing:
        return existing['id']

    # ìƒˆ ë°ì´í„°ì…‹ ìƒì„±
    result = await supabase.from_('price_datasets').insert({
        'stock_code': stock_code,
        'start_date': start_date,
        'end_date': end_date,
        'data_hash': data_hash,
        'row_count': len(price_df)
    }).single()

    return result['id']
```

#### Step 3: `backend/backtest/runner.py` ìˆ˜ì •
```python
# ë°±í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì‹œ dataset_id ê¸°ë¡
dataset_id = await dataset_manager.get_or_create_dataset(
    stock_code, start_date, end_date, price_df
)

result = {
    "dataset_id": dataset_id,
    "trades": trades,
    "performance": metrics
}
```

#### Step 4: í”„ë¡ íŠ¸ì—”ë“œì— "ë°ì´í„° ë²„ì „" í‘œì‹œ ì¶”ê°€
```typescript
// BacktestResults.tsxì— dataset_id í‘œì‹œ
<Chip label={`ë°ì´í„° ë²„ì „: ${result.dataset_id.slice(0, 8)}`} />
```

**ê²€ì¦ ë°©ë²•**:
```sql
-- ë™ì¼ ì „ëµ + ë™ì¼ ê¸°ê°„ â†’ ë™ì¼ dataset_id í™•ì¸
SELECT
  br.id,
  br.dataset_id,
  pd.data_hash,
  br.total_trades
FROM backtest_results br
JOIN price_datasets pd ON br.dataset_id = pd.id
WHERE br.strategy_id = 'íŠ¹ì •_ì „ëµ_UUID'
ORDER BY br.created_at DESC
LIMIT 10;
```

---

## ğŸ”® í–¥í›„ ê³„íš (Phase 3-4)

### Phase 3: API/ì›Œì»¤ ë¶„ë¦¬ [2-3ì£¼]

**ë¬¸ì œì **: í˜„ì¬ ë‹¨ì¼ í”„ë¡œì„¸ìŠ¤ì—ì„œ API + ë°±í…ŒìŠ¤íŠ¸ ì‹¤í–‰ â†’ ëŠë¦° ë°±í…ŒìŠ¤íŠ¸ ì‹œ API ì‘ë‹µ ì§€ì—°

**í•´ê²°ì±…**: Redis ê¸°ë°˜ ì‘ì—… í ì‹œìŠ¤í…œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FastAPI   â”‚â”€â”€â”€â”€â”€â–¶â”‚    Redis    â”‚â—€â”€â”€â”€â”€â”€â”‚   Worker    â”‚
â”‚  (APIë§Œ)    â”‚      â”‚  (ì‘ì—… í)   â”‚      â”‚(ë°±í…ŒìŠ¤íŠ¸)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                                           â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  Supabase   â”‚
                  â”‚  (ê²°ê³¼ ì €ì¥) â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**êµ¬í˜„ ê³„íš**:
1. Redis ì‘ì—… í (`backend/queue/redis_queue.py`)
2. ì›Œì»¤ í”„ë¡œì„¸ìŠ¤ (`backend/workers/backtest_worker.py`)
3. API ì—”ë“œí¬ì¸íŠ¸ ìˆ˜ì • (ë¹„ë™ê¸° ì‘ì—… ìƒì„± â†’ ì‘ì—… ID ë°˜í™˜)
4. í”„ë¡ íŠ¸ì—”ë“œ í´ë§ (ì‘ì—… IDë¡œ ì§„í–‰ë¥  ì¡°íšŒ)

---

### Phase 4: Windows Execution Agent [3-4ì£¼]

**ë¬¸ì œì **: í‚¤ì›€ APIëŠ” Windows 32bitì—ì„œë§Œ ë™ì‘ â†’ Linux NASì—ì„œ ì‹¤í–‰ ë¶ˆê°€

**í•´ê²°ì±…**: Windows PCì—ì„œ í‚¤ì›€ API ì „ìš© ì—ì´ì „íŠ¸ ì‹¤í–‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      gRPC       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   NAS API   â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Windows Agent   â”‚
â”‚  (Linux)    â”‚                 â”‚  (32bit Python)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
                                         â–¼
                                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                 â”‚  í‚¤ì›€ OpenAPI â”‚
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**êµ¬í˜„ ê³„íš**:
1. gRPC í”„ë¡œí† ì½œ ì •ì˜ (`proto/kiwoom_agent.proto`)
2. Windows ì—ì´ì „íŠ¸ (`windows_agent/kiwoom_service.py`)
3. NAS í´ë¼ì´ì–¸íŠ¸ (`backend/kiwoom/grpc_client.py`)
4. ìƒíƒœ ëª¨ë‹ˆí„°ë§ (í•˜íŠ¸ë¹„íŠ¸, ìë™ ì¬ì—°ê²°)

---

## ğŸ“‚ í”„ë¡œì íŠ¸ í´ë” êµ¬ì¡°

```
auto_stock/
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ architecture/          # ì•„í‚¤í…ì²˜ ì„¤ê³„
â”‚   â”‚   â”œâ”€â”€ ARCHITECTURE_UPGRADE_PLAN.md
â”‚   â”‚   â””â”€â”€ STANDARD_STRATEGY_FORMAT.md
â”‚   â”œâ”€â”€ deployment/            # ë°°í¬ ê´€ë ¨
â”‚   â”‚   â”œâ”€â”€ NAS_DEPLOYMENT_FILES.md
â”‚   â”‚   â”œâ”€â”€ NAS_FOLDER_STRUCTURE.md
â”‚   â”‚   â””â”€â”€ PHASE_2.5_DEPLOYMENT.md
â”‚   â”œâ”€â”€ testing/               # í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ
â”‚   â”‚   â””â”€â”€ FRONTEND_AUTO_CONVERSION_TEST.md
â”‚   â”œâ”€â”€ guides/                # ì‚¬ìš©ì ê°€ì´ë“œ
â”‚   â”‚   â”œâ”€â”€ fix-strategy-loading.md
â”‚   â”‚   â””â”€â”€ fix-vercel-deployment.md
â”‚   â””â”€â”€ development/           # ê°œë°œ ë¬¸ì„œ
â”‚       â””â”€â”€ DEVELOPMENT_ROADMAP.md
â”‚
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ backtest/
â”‚   â”‚   â”œâ”€â”€ preflight.py       # âœ… ìµœì‹  (ì–‘ìª½ í˜•ì‹ ì§€ì›)
â”‚   â”‚   â”œâ”€â”€ runner.py
â”‚   â”‚   â””â”€â”€ dataset_manager.py # ğŸ”œ êµ¬í˜„ ì˜ˆì •
â”‚   â”œâ”€â”€ indicators/
â”‚   â”‚   â”œâ”€â”€ calculator.py      # âœ… DB ì „ìš© ëª¨ë“œ
â”‚   â”‚   â””â”€â”€ sandbox.py         # âœ… ë³´ì•ˆ ê°•í™”
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ backtest.py
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ StrategyBuilder.tsx  # âœ… ìë™ ë³€í™˜ ì ìš©
â”‚   â”‚   â””â”€â”€ BacktestRunner.tsx   # âœ… íƒ€ì… ì—ëŸ¬ ìˆ˜ì •
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ conditionConverter.ts # âœ… ì‹ ê·œ
â”‚
â”œâ”€â”€ sql/
â”‚   â”œâ”€â”€ 02_indicator_columns_standard.sql  # âœ… ì™„ë£Œ
â”‚   â”œâ”€â”€ 04_reset_strategies_with_standard_templates.sql  # ğŸ”œ ì‹¤í–‰ í•„ìš”
â”‚   â”œâ”€â”€ 05_dataset_versioning.sql          # ğŸ”œ êµ¬í˜„ ì˜ˆì •
â”‚   â””â”€â”€ scripts/
â”‚       â””â”€â”€ check_strategy_config.sql
â”‚
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ deployment/
â”‚       â”œâ”€â”€ deploy_backend_to_nas.sh
â”‚       â”œâ”€â”€ deploy_to_nas.bat
â”‚       â”œâ”€â”€ check_nas_logs.bat
â”‚       â”œâ”€â”€ test_nas_api.py
â”‚       â””â”€â”€ test_nas_backtest.py
â”‚
â”œâ”€â”€ config/
â”‚   â””â”€â”€ docker/
â”‚       â”œâ”€â”€ docker-compose.auto-stock.yml
â”‚       â”œâ”€â”€ docker-compose.hybrid.yml
â”‚       â””â”€â”€ docker-compose.nas.yml
â”‚
â”œâ”€â”€ .taskmaster/
â”‚   â”œâ”€â”€ tasks/tasks.json       # TaskMaster ì‘ì—… ê´€ë¦¬
â”‚   â””â”€â”€ config.json
â”‚
â”œâ”€â”€ MASTER_ROADMAP.md          # âœ… ì´ íŒŒì¼ (ë§ˆìŠ¤í„° ê³„íš)
â””â”€â”€ README.md                  # í”„ë¡œì íŠ¸ ì†Œê°œ
```

---

## ğŸ“ í•µì‹¬ ê°œë… ì •ë¦¬

### 1. ì „ëµ ì¡°ê±´ í˜•ì‹ í‘œì¤€í™”

#### êµ¬ í˜•ì‹ (ë ˆê±°ì‹œ)
```json
{
  "buyConditions": [
    {"indicator": "MACD", "operator": "cross_above", "compareTo": "MACD_SIGNAL"}
  ]
}
```

#### í‘œì¤€ í˜•ì‹ (í˜„ì¬)
```json
{
  "buyConditions": [
    {"left": "macd", "operator": "crossover", "right": "macd_signal"}
  ]
}
```

#### ìë™ ë³€í™˜ ë§¤í•‘
| êµ¬ í˜•ì‹ | í‘œì¤€ í˜•ì‹ |
|---------|-----------|
| `cross_above` | `crossover` |
| `cross_below` | `crossunder` |
| `indicator` | `left` |
| `compareTo` | `right` |
| `value` | `right` (ìˆ«ìì¸ ê²½ìš°) |

---

### 2. ì§€í‘œ-ì»¬ëŸ¼ ë§¤í•‘

| ì§€í‘œëª… | ì»¬ëŸ¼ëª… | ì„¤ëª… |
|--------|--------|------|
| `macd` | `macd`, `macd_signal`, `macd_hist` | MACD ì§€í‘œ 3ê°œ ì»¬ëŸ¼ |
| `rsi` | `rsi` | RSI ë‹¨ì¼ ì»¬ëŸ¼ |
| `sma` | `sma_{period}` | ì˜ˆ: `sma_20`, `sma_50` |
| `ema` | `ema_{period}` | ì˜ˆ: `ema_12`, `ema_26` |
| `bb` | `bb_upper`, `bb_middle`, `bb_lower` | ë³¼ë¦°ì €ë°´ë“œ 3ê°œ ë°´ë“œ |
| `stoch` | `stoch_k`, `stoch_d` | ìŠ¤í† ìºìŠ¤í‹± 2ê°œ ë¼ì¸ |
| `adx` | `adx`, `plus_di`, `minus_di` | ADX 3ê°œ ì»¬ëŸ¼ |

**í‘œì¤€ í…Œì´ë¸”**: `indicator_columns` ([sql/02_indicator_columns_standard.sql](sql/02_indicator_columns_standard.sql))

---

### 3. ë°±í…ŒìŠ¤íŠ¸ ë°ì´í„° ì¬í˜„ì„± (Phase 2.5b)

#### ë¬¸ì œ ìƒí™©
- ë™ì¼ ì „ëµ + ë™ì¼ ê¸°ê°„ â†’ ë‹¤ë¥¸ ê²°ê³¼ ë°œìƒ ê°€ëŠ¥
- ì›ì¸: Supabase ë°ì´í„°ê°€ ì—…ë°ì´íŠ¸ë˜ë©´ ê³¼ê±° ë°±í…ŒìŠ¤íŠ¸ ì¬í˜„ ë¶ˆê°€

#### í•´ê²°ì±…: dataset_id
```
ë°±í…ŒìŠ¤íŠ¸ ì‹¤í–‰
    â†“
ì£¼ê°€ ë°ì´í„° ì¡°íšŒ (Supabase)
    â†“
ë°ì´í„° í•´ì‹œ ìƒì„± (SHA256)
    â†“
price_datasets í…Œì´ë¸”ì—ì„œ ì¡°íšŒ/ìƒì„±
    â†“
dataset_idë¥¼ backtest_resultsì— ê¸°ë¡
```

**ì¥ì **:
- ê³¼ê±° ë°±í…ŒìŠ¤íŠ¸ ê²°ê³¼ 100% ì¬í˜„ ê°€ëŠ¥
- ë°ì´í„° ë³€ê²½ ê°ì§€ (í•´ì‹œ ë¶ˆì¼ì¹˜ ì‹œ ê²½ê³ )
- ë™ì¼ ë°ì´í„° ì¬ì‚¬ìš© (ì¤‘ë³µ ì €ì¥ ë°©ì§€)

---

## ğŸ› ì•Œë ¤ì§„ ì´ìŠˆ ë° í•´ê²° ìƒíƒœ

| ì´ìŠˆ | ìƒíƒœ | í•´ê²° ë°©ë²• |
|------|------|-----------|
| ë°±í…ŒìŠ¤íŠ¸ "ê±°ë˜ 0íšŒ" ì˜¤ë¥˜ | âœ… í•´ê²° | preflight.py ì–‘ìª½ í˜•ì‹ ì§€ì› |
| MACD ì»¬ëŸ¼ëª… ë¶ˆì¼ì¹˜ | âœ… í•´ê²° | indicator_columns í‘œì¤€ í…Œì´ë¸” |
| í”„ë¡ íŠ¸ì—”ë“œ í˜•ì‹ ë¶ˆì¼ì¹˜ | âœ… í•´ê²° | conditionConverter.ts ìë™ ë³€í™˜ |
| í…œí”Œë¦¿ ì „ëµ êµ¬ í˜•ì‹ ì‚¬ìš© | ğŸ”œ í•´ê²° ì˜ˆì • | SQL 04ë²ˆ ì‹¤í–‰ í•„ìš” |
| ë°±í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì¬í˜„ ë¶ˆê°€ | ğŸ”œ í•´ê²° ì˜ˆì • | Phase 2.5b (dataset_id) |
| ë°±í…ŒìŠ¤íŠ¸ ì¤‘ API íƒ€ì„ì•„ì›ƒ | ğŸ“‹ ê³„íšë¨ | Phase 3 (Redis ì›Œì»¤) |
| í‚¤ì›€ API Linux ë¯¸ì§€ì› | ğŸ“‹ ê³„íšë¨ | Phase 4 (Windows Agent) |

---

## ğŸ“ ë¬¸ì œ ë°œìƒ ì‹œ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ë°±í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜ ë°œìƒ ì‹œ

1. **NAS ì„œë²„ ë¡œê·¸ í™•ì¸**
   ```bash
   cd scripts/deployment
   bash check_nas_logs.bat
   # ë˜ëŠ”
   docker logs backend_container | grep "Preflight"
   ```

2. **ì „ëµ í˜•ì‹ í™•ì¸**
   ```sql
   SELECT config FROM strategies WHERE id = 'ì˜¤ë¥˜_ë°œìƒí•œ_ì „ëµ_UUID';
   ```
   - `left/right` í˜•ì‹ì¸ì§€ í™•ì¸
   - `indicator/compareTo` í˜•ì‹ì´ë©´ StrategyBuilderì—ì„œ ì¬ì €ì¥

3. **ì§€í‘œ ë°ì´í„° í™•ì¸**
   ```sql
   SELECT column_name
   FROM information_schema.columns
   WHERE table_name = 'indicators'
   AND column_name LIKE '%macd%';
   ```

4. **Preflight ê²€ì¦ ì‹¤í–‰**
   ```python
   # scripts/deployment/test_nas_api.py ìˆ˜ì •í•˜ì—¬ ì‹¤í–‰
   response = requests.post("http://192.168.50.150:8001/api/backtest/validate",
       json={"strategy_id": "UUID"})
   print(response.json())
   ```

---

## ğŸ¯ ë‹¤ìŒ ì²´í¬í¬ì¸íŠ¸

### 1ì£¼ì¼ ë‚´ ëª©í‘œ
- [ ] NAS ì„œë²„ ìµœì‹  ë°±ì—”ë“œ ë°°í¬ ì™„ë£Œ
- [ ] Supabase í…œí”Œë¦¿ ì „ëµ ì¬ìƒì„±
- [ ] ì—”ë“œíˆ¬ì—”ë“œ í…ŒìŠ¤íŠ¸ í†µê³¼ (3ê°œ ì‹œë‚˜ë¦¬ì˜¤)
- [ ] Phase 2.5b SQL ìŠ¤í‚¤ë§ˆ ì‘ì„± ì™„ë£Œ

### 1ê°œì›” ë‚´ ëª©í‘œ
- [ ] dataset_id ì‹œìŠ¤í…œ êµ¬í˜„ ì™„ë£Œ
- [ ] JSON Schema ê²€ì¦ ì‹œìŠ¤í…œ êµ¬í˜„
- [ ] Redis ì‘ì—… í ì‹œìŠ¤í…œ ì„¤ê³„ ì‹œì‘

### 3ê°œì›” ë‚´ ëª©í‘œ
- [ ] API/ì›Œì»¤ ë¶„ë¦¬ ì™„ë£Œ
- [ ] Windows Execution Agent í”„ë¡œí† íƒ€ì…
- [ ] ì‹¤ì „ íˆ¬ì ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ

---

## ğŸ“š ì°¸ê³  ë¬¸ì„œ

### ì•„í‚¤í…ì²˜
- [ARCHITECTURE_UPGRADE_PLAN.md](docs/architecture/ARCHITECTURE_UPGRADE_PLAN.md)
- [STANDARD_STRATEGY_FORMAT.md](docs/architecture/STANDARD_STRATEGY_FORMAT.md)

### ë°°í¬
- [NAS_DEPLOYMENT_FILES.md](docs/deployment/NAS_DEPLOYMENT_FILES.md)
- [NAS_FOLDER_STRUCTURE.md](docs/deployment/NAS_FOLDER_STRUCTURE.md)
- [PHASE_2.5_DEPLOYMENT.md](docs/deployment/PHASE_2.5_DEPLOYMENT.md)

### í…ŒìŠ¤íŠ¸
- [FRONTEND_AUTO_CONVERSION_TEST.md](docs/testing/FRONTEND_AUTO_CONVERSION_TEST.md)

### ê°€ì´ë“œ
- [fix-strategy-loading.md](docs/guides/fix-strategy-loading.md)
- [fix-vercel-deployment.md](docs/guides/fix-vercel-deployment.md)

### ê°œë°œ
- [DEVELOPMENT_ROADMAP.md](docs/development/DEVELOPMENT_ROADMAP.md)

---

## ğŸ“Š í”„ë¡œì íŠ¸ í†µê³„

- **ì´ ì½”ë“œ ë¼ì¸**: ~35,000 lines
- **í”„ë¡ íŠ¸ì—”ë“œ**: 18,000 lines (TypeScript/React)
- **ë°±ì—”ë“œ**: 12,000 lines (Python)
- **SQL**: 3,000 lines
- **ë¬¸ì„œ**: 2,000 lines (Markdown)

- **ì´ ì»´í¬ë„ŒíŠ¸**: 85ê°œ
- **ì´ API ì—”ë“œí¬ì¸íŠ¸**: 42ê°œ
- **ì´ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”**: 28ê°œ

---

**ì‘ì„±ì**: Claude Code
**ìµœì¢… ìˆ˜ì •**: 2025-10-01
**ë²„ì „**: 2.0
