# 프론트엔드 UI 확인 체크리스트

## 📍 확인 위치: 실시간 매매 신호 모니터링 탭

### 1️⃣ 매수 대기 종목 섹션 (분홍색 그라데이션)

#### ✅ 확인 사항:
- [ ] **분홍색 그라데이션 카드**가 표시됨
- [ ] 제목: "매수 대기 종목"
- [ ] 설명: "조건 근접도 80% 이상 (곧 매수 신호 발생 가능)"
- [ ] Timer 아이콘 표시
- [ ] 종목 개수 칩 표시 (예: "3개 종목")

#### 표시되는 종목:
- 투자유니버스에 포함된 종목
- 매수 조건 80-99% 충족
- **보유 여부와 관계없이** 표시됨

---

### 2️⃣ 매도 대기 종목 섹션 (초록색 그라데이션) ⭐ 신규!

#### ✅ 확인 사항:
- [ ] **초록색 그라데이션 카드**가 표시됨 (`#43e97b` → `#38f9d7`)
- [ ] 제목: "매도 대기 종목"
- [ ] 설명: "보유 종목의 매도 조건 근접도 80% 이상 (곧 매도 신호 발생 가능)"
- [ ] Timer 아이콘 표시
- [ ] 보유 종목 개수 칩 표시 (예: "2개 보유종목")

#### 표시되는 종목 조건:
- ⭐ **포트폴리오에 보유 중인 종목만** (`is_held = true`)
- 매도 조건 80-99% 충족
- 매도 조건 점수가 높은 순으로 정렬

#### 테이블 컬럼:
1. **종목**: 종목명 (큰 글씨) + 종목코드 (작은 글씨)
2. **현재가**: 현재 주가
3. **매도 조건 충족도**: 진행률 바 + 퍼센트 표시
4. **업데이트**: 마지막 업데이트 시간

#### 진행률 바 색상:
- 95% 이상: 빨간색 (`#f44336`)
- 90-95%: 주황색 (`#ff9800`)
- 80-90%: 파란색 (`#2196f3`)

---

### 3️⃣ 실시간 매매 신호 섹션 (보라색 그라데이션)

#### ✅ SELL 신호 확인:
- [ ] SELL 신호가 **보유하지 않은 종목에 대해 표시되지 않음** ⭐ 핵심!
- [ ] SELL 신호는 **보유 종목에 대해서만** 표시됨
- [ ] BUY 신호는 기존과 동일하게 작동

---

## 🧪 테스트 시나리오

### 시나리오 1: 매도 대기 종목이 없는 경우
**예상 결과**: 초록색 카드가 **표시되지 않음**

### 시나리오 2: 매도 조건 충족하지만 미보유 종목
**예상 결과**:
- 매도 대기 종목에 **표시되지 않음** ✅
- SELL 신호도 **생성되지 않음** ✅

### 시나리오 3: 매도 조건 85% 충족 + 보유 종목
**예상 결과**:
- 초록색 "매도 대기 종목" 카드에 **표시됨** ✅
- 진행률 바: 85%
- 아직 SELL 신호는 생성 안 됨 (100% 도달 시 생성)

### 시나리오 4: 매도 조건 100% 충족 + 보유 종목
**예상 결과**:
- 매도 대기 종목에서 **사라짐** (100점이므로)
- 실시간 매매 신호 섹션에 **SELL 신호 표시** ✅

---

## 🔍 데이터 흐름 검증

### Console에서 확인:
브라우저 개발자 도구 (F12) → Console 탭

```javascript
// 매도 대기 종목 조회 성공 시:
✅ Loaded X pending sell stocks

// 에러 발생 시:
❌ 매도 대기 종목 조회 실패: [에러 메시지]
```

---

## 📊 Supabase 직접 확인

### 프론트엔드가 조회하는 쿼리:
```sql
SELECT *
FROM strategy_monitoring
WHERE strategy_id IN (활성화된 전략 ID들)
  AND is_held = true          -- ⭐ 핵심 조건!
  AND exit_condition_match_score >= 80
  AND exit_condition_match_score < 100
  AND updated_at >= NOW() - INTERVAL '1 hour'
ORDER BY exit_condition_match_score DESC
LIMIT 50;
```

### ✅ 정상 동작 확인:
1. 위 쿼리 실행
2. 결과에 **보유하지 않은 종목이 없는지** 확인
3. 프론트엔드 UI와 동일한 종목이 나오는지 확인

---

## 🐛 문제 발생 시 체크리스트

### UI에 매도 대기 종목이 안 보이는 경우:
- [ ] `is_held` 컬럼이 제대로 업데이트되었는지 확인
- [ ] n8n 워크플로우가 정상 실행 중인지 확인
- [ ] 실제로 보유 종목 중 매도 조건 80% 이상인 종목이 있는지 확인

### 비보유 종목이 매도 대기에 표시되는 경우:
- [ ] `is_held` 플래그 로직 확인
- [ ] 포트폴리오 테이블(`kw_portfolio`) 데이터 확인
- [ ] 워크플로우의 "Get Held Stocks" 노드 확인

### SELL 신호가 비보유 종목에 발생하는 경우:
- [ ] backend/api/strategy.py 포트폴리오 검증 로직 확인
- [ ] 백엔드 로그에서 "SELL 조건 충족했으나 미보유 종목" 메시지 확인
